;/*FB_PKG_DELIM*/

__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSPredefineTraceForTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=c.i64.of_int32(a[5].length),c.i64.gt(d[0],c.i64.cast([0,0]))?c.loopAsync(d[0],function(e){return d[3]=e,c.seq([function(e){return c.ntop("Array",b("LSArrayGetObjectAt"),a[5],d[3]).then(function(a){return a=a,d[4]=a[0],d[5]=a[1],a})},function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[1],a[3]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[3]&&c.i64.eq(b.attachmentIndex,d[3])&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({attachmentFbid:c.i64.to_string(d[4])})})}])}):c.resolve()},function(e){return c.i64.eq(f,c.i64.cast([0,12]))?d[1]=c.i64.cast([0,10]):(a[9]?d[3]=c.i64.cast([0,9]):d[3]=c.i64.cast([0,3]),d[1]=d[3]),c.sp(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),f,c.i64.cast([0,0]),f,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(e){return a[12]!==f?c.seq([function(e){return c.sp(b("LSPredefineTraceForTask"),a[12],d[2],c.i64.to_string(c.i64.cast([0,46])),a[3])},function(d){return c.sp(b("LSAppendDataTraceAddon"),a[12],c.i64.cast([0,20]),c.i64.cast([0,1]),f,f)}]):c.resolve()},function(b){return c.db.table(31).add({taskId:d[2],threadKey:a[1],offlineThreadingId:a[3],threadAttributionSource:a[6],platformRef:a[10],platformToken:a[11],replySourceId:a[7],replySourceType:a[8],sendType:d[1],markThreadRead:!1})}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSGetMessageAttributionParams",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.ftr(b.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[e,e,e],c[0]=d[0],c[1]=d[1],c[2]=d[2],d):(b=a.item,d=[b.threadAttributionSource,b.platformRef,b.platformToken],c[0]=d[0],c[1]=d[1],c[2]=d[2],d)})},function(a){return a=[c[0],c[1],c[2]],d[0]=a[0],d[1]=a[1],d[2]=a[2],a}])},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSInsertPhase2PendingTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(f){return b.seq([function(d){return b.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=e:(b=a.item,c[0]=b.threadKey)})},function(d){return b.i64.neq(c[0],e)?b.seq([function(d){return c[3]=b.i64.of_float(Date.now()),b.db.table(2).add({taskId:void 0,taskValue:a[0],queueName:[b.i64.to_string(c[0]),"_multi_media"].join(""),context:"4",enqueueTimestampMs:c[3],pluginType:a[1]})},function(a){return c[2]=e}]):b.resolve(c[2]=b.i64.cast([0,1002]))},function(a){return d[0]=c[2]}])},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return d[0]=c.createArray(),c.db.table(51).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?0:(b=a.item,d[3]=new c.Map(),d[3].set("offline_attachment_id",b.offlineAttachmentId),d[3].set("offline_threading_id",b.offlineThreadingId),d[3].set("in_message_index",b.inMessageIndex),d[3].set("attachment_type",b.attachmentType),d[3].set("should_transcode",b.shouldTranscode),d[3].set("use_double_phase",b.useDoublePhase),d[3].set("send_by_server",b.sendByServer),d[3].set("is_secure",b.isSecure),d[3].set("state",b.state),d[3].set("fbid",b.fbid),d[3].set("metadata",b.metadata),d[3].set("error",b.error),d[3].set("message_id",b.messageId),d[4]=(d[0].push(d[3]),d[0]))})},function(e){return d[2]=c.i64.of_int32(d[0].length),c.i64.neq(d[2],c.i64.cast([0,0]))?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[0],c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(b){return d[5]=d[3].get("state"),d[3],c.i64.neq(a[1],f)?a[2]!==f?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],messageId:a[2],metadata:a[3]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],fbid:a[1],metadata:a[3]})})):c.i64.neq(a[4],f)?(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({state:d[6],error:a[4]})})):(c.i64.eq(d[5],c.i64.cast([-1,4294967293]))?(d[7]=c.i64.cast([-1,4294967295]),d[6]=d[7]):(c.i64.eq(d[5],c.i64.cast([0,1]))?d[7]=c.i64.cast([0,2]):(c.i64.eq(d[5],c.i64.cast([0,3]))?d[8]=c.i64.cast([0,4]):(c.i64.eq(d[5],c.i64.cast([0,5]))?d[9]=c.i64.cast([0,6]):(c.i64.eq(d[5],c.i64.cast([0,13]))?d[10]=c.i64.cast([0,14]):(c.i64.eq(d[5],c.i64.cast([0,7]))?d[11]=c.i64.cast([0,8]):(c.i64.eq(d[5],c.i64.cast([0,9]))?d[12]=c.i64.cast([0,10]):(c.i64.eq(d[5],c.i64.cast([0,11]))?d[13]=c.i64.cast([0,12]):d[13]=d[5],d[12]=d[13]),d[11]=d[12]),d[10]=d[11]),d[9]=d[10]),d[8]=d[9]),d[7]=d[8]),d[6]=d[7]),c.fe(c.db.table(51).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({state:d[6]})}))}]):c.resolve()}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSRemoveMediaSendJobs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSSendPhase1MultiPhotoMessageV2",["LSArrayGetObjectAt","LSGetMessageAttributionParams","LSIssueSendAttachmentMessageTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=c.createArray(),d[1]=new c.Map(),d[2]=new c.Map(),d[3]=!1,d[4]=c.i64.cast([0,0]),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[7]=a.fbid,d[4]=c.i64.add(d[4],c.i64.cast([0,1])),c.i64.neq(d[7],f)?d[8]=(d[0].push(d[7]),d[0]):0})},function(e){return d[5]=c.i64.of_int32(d[0].length),c.i64.neq(d[5],d[4])||c.i64.eq(d[4],c.i64.cast([0,0]))?c.resolve(d[6]=c.i64.cast([0,10002])):c.seq([function(b){return c.db.table(12).fetch([[[a[0]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f,f],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4],c):(b=a.item,c=[b.threadKey,b.senderId,b.text,b.replySourceId,b.replySourceTypeV2],d[7]=c[0],d[8]=c[1],d[9]=c[2],d[10]=c[3],d[11]=c[4],c)})},function(e){return c.i64.eq(d[7],f)||c.i64.eq(d[8],f)?c.resolve((c.i64.eq(d[7],f)?d[14]=c.i64.cast([0,10003]):d[14]=c.i64.cast([0,10004]),d[13]=d[14])):c.seq([function(a){return c.db.table(9).fetch([[[d[7]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=f:(b=a.item,d[14]=b.threadType)})},function(b){return c.ftr(c.db.table(31).fetch(),function(b){return b.offlineThreadingId===a[0]}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[f,f,f,f,f,f],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],c):(b=a.item,c=[b.platformRef,b.platformToken,b.initiatingSource,f,f,f],d[16]=c[0],d[17]=c[1],d[18]=c[2],d[19]=c[3],d[20]=c[4],d[21]=c[5],c)})},function(e){return c.i64.neq(d[14],f)?c.seq([function(e){return d[24]=d[1].keys(),d[25]=c.i64.of_int32(d[24].length),c.i64.gt(d[25],c.i64.cast([0,0]))?c.loopAsync(d[25],function(e){return d[31]=e,c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[24],d[31]).then(function(a){return a=a,d[32]=a[0],d[33]=a[1],a})},function(e){return d[34]=d[2].get(d[32]),d[2],d[35]=c.i64.to_string(d[34]),d[35]!==f?c.seq([function(a){return c.ntop("Array",b("LSArrayGetObjectAt"),d[24],d[31]).then(function(a){return a=a,d[36]=a[0],d[37]=a[1],a})},function(b){return d[38]=d[1].get(d[32]),d[1],c.fe(c.ftr(c.db.table(16).fetch([[[d[7],a[0],d[36]]]]),function(b){return c.i64.eq(b.threadKey,d[7])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[0]&&b.attachmentFbid===d[36]}),function(a){var b=a.update;a.item;return b({attachmentFbid:d[35],originalFileHash:d[38]})})}]):c.resolve()}])}):c.resolve()},function(e){return c.sp(b("LSGetMessageAttributionParams"),a[0]).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],d[28]=a[2],a})},function(e){return c.i64.neq(d[26],f)?d[29]=d[26]:d[29]=c.i64.cast([0,0]),c.sp(b("LSIssueSendAttachmentMessageTask"),d[8],d[7],d[14],a[0],d[9],d[0],d[29],d[10],d[11],d[3],d[16],d[17],a[1])},function(a){return c.i64.ge(c.i64.cast([0,0]),c.i64.cast([0,0]))?d[30]=f:d[30]=c.i64.cast([0,10006]),d[23]=d[30]}]):c.resolve(d[23]=c.i64.cast([0,10005]))},function(a){return d[13]=d[23]}])},function(a){return d[6]=d[13]}])},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSResumeMediaSendJob",["LSInsertPhase2PendingTask","LSSendPhase1MultiPhotoMessageV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return d[0]=new c.Map(),d[1]=new c.Map(),d[1].set("main_job_succeeded",!1),d[1].set("resume_failed",!1),d[1].set("error",f),d[1].set("running_sub_job_states",d[0]),d[2]=new c.Map(),d[2].set("should_transcode",!1),d[2].set("use_double_phase",!1),d[2].set("send_by_server",!1),d[2].set("is_secure",!1),d[2].set("should_dedupe",!1),c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?0:(b=a.item,d[2].set("should_transcode",b.shouldTranscode),d[2].set("use_double_phase",b.useDoublePhase),d[2].set("send_by_server",b.sendByServer),d[2].set("is_secure",b.isSecure))})},function(b){return d[4]=new c.Map(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[13]=a.offlineAttachmentId,d[11]=a.state,d[12]=a.error,c.i64.eq(d[11],c.i64.cast([-1,4294967293]))?d[10]=!0:(c.i64.eq(d[11],c.i64.cast([0,1]))?d[14]=!0:(c.i64.eq(d[11],c.i64.cast([0,3]))?d[15]=!0:(c.i64.eq(d[11],c.i64.cast([0,5]))?d[16]=!0:(c.i64.eq(d[11],c.i64.cast([0,13]))?d[17]=!0:(c.i64.eq(d[11],c.i64.cast([0,7]))?d[18]=!0:(c.i64.eq(d[11],c.i64.cast([0,9]))?d[19]=!0:(c.i64.eq(d[11],c.i64.cast([0,11]))?d[20]=!0:d[20]=!1,d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),d[10]=d[14]),d[10]?c.resolve(c.i64.eq(d[11],c.i64.cast([0,5]))||c.i64.eq(d[11],c.i64.cast([0,11]))?0:d[4].set(d[13],d[11])):c.i64.neq(d[12],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[12]))):(c.i64.eq(d[11],c.i64.cast([-1,4294967295]))?d[14]=c.i64.cast([0,5]):(c.i64.eq(d[11],c.i64.cast([-1,4294967294]))?(d[16]=d[2].get("should_transcode"),d[2],d[15]=d[16]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(d[11],c.i64.cast([0,2]))?d[16]=c.i64.cast([0,3]):(c.i64.eq(d[11],c.i64.cast([0,4]))?(d[18]=d[2].get("send_by_server"),d[2],d[19]=d[2].get("use_double_phase"),d[2],d[17]=d[18]?d[19]?c.i64.cast([0,13]):f:c.i64.cast([0,5])):(c.i64.eq(d[11],c.i64.cast([0,6]))?(d[19]=d[2].get("use_double_phase"),d[2],d[18]=d[19]?c.i64.cast([0,13]):f):(c.i64.eq(d[11],c.i64.cast([0,14]))?(d[20]=d[2].get("use_double_phase"),d[2],d[21]=d[2].get("should_transcode"),d[2],d[19]=d[20]?d[21]?c.i64.cast([0,7]):c.i64.cast([0,9]):f):(c.i64.eq(d[11],c.i64.cast([0,8]))?d[20]=c.i64.cast([0,9]):(c.i64.eq(d[11],c.i64.cast([0,10]))?(d[22]=d[2].get("send_by_server"),d[2],d[21]=d[22]?f:c.i64.cast([0,11])):(c.i64.eq(d[11],c.i64.cast([0,12]))?d[22]=f:d[22]=f,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[18]=d[19]),d[17]=d[18]),d[16]=d[17]),d[15]=d[16]),d[14]=d[15]),c.i64.neq(d[14],f)?c.seq([function(a){return c.fe(c.db.table(51).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({state:d[14]})})},function(a){return c.i64.eq(d[14],c.i64.cast([0,5]))||c.i64.eq(d[14],c.i64.cast([0,11]))?0:d[4].set(d[13],d[14])}]):c.resolve())})},function(b){return c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["state","ASC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[5]=f:(b=a.item,d[5]=b.state)})},function(e){return c.i64.neq(d[5],f)?(d[10]=d[2].get("send_by_server"),d[2],d[11]=d[2].get("use_double_phase"),d[2],d[12]=d[2].get("use_double_phase"),d[2],(d[10]?d[11]?c.i64.eq(d[5],c.i64.cast([0,10])):c.i64.eq(d[5],c.i64.cast([0,4])):d[12]?c.i64.eq(d[5],c.i64.cast([0,12])):c.i64.eq(d[5],c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):c.i64.eq(d[5],c.i64.cast([0,5]))?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[15]=a.error,c.i64.eq(d[15],f)?(c.i64.neq(a.fbid,f)?d[16]=f:d[16]=c.i64.cast([0,9]),d[14]=d[16]):d[14]=d[15],c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(e){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(e){return d[14]=d[2].get("is_secure"),d[2],d[14]?c.seq([function(b){return d[16]=c.createArray(),d[17]=new c.Map(),d[18]=new c.Map(),d[19]=!1,d[20]=c.i64.cast([0,0]),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.fbid,d[20]=c.i64.add(d[20],c.i64.cast([0,1])),c.i64.neq(d[25],f)?d[26]=(d[16].push(d[25]),d[16]):0})},function(b){return d[21]=c.createArray(),c.fe(c.sb(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),[["inMessageIndex","ASC"]]),function(a){a=a.item;return d[25]=a.metadata,d[25]!==f?d[26]=(d[21].push(d[25]),d[21]):0})},function(a){return d[22]=c.i64.of_int32(d[16].length),d[23]=c.i64.of_int32(d[21].length),c.i64.neq(d[22],d[20])||c.i64.neq(d[23],d[20])?d[24]=c.i64.cast([0,11]):(function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),function(a){c.logger(a).debug(a)}("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),d[24]=f),d[15]=d[24]}]):c.seq([function(e){return c.sp(b("LSSendPhase1MultiPhotoMessageV2"),a[0],a[2]).then(function(a){return a=a,d[16]=a[0],a})},function(b){return c.i64.eq(d[16],f)?c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,6])})}):c.resolve()},function(a){return d[15]=d[16]}])},function(b){return c.i64.eq(d[15],f)?(d[16]=d[2].get("send_by_server"),d[2],d[17]=d[2].get("use_double_phase"),d[2],d[18]=d[2].get("use_double_phase"),d[2],(d[16]?d[17]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4])):d[18]?c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12])):c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6])))?c.resolve(d[1].set("main_job_succeeded",!0)):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967295]))?d[19]=c.i64.cast([0,5]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([-1,4294967294]))?(d[21]=d[2].get("should_transcode"),d[2],d[20]=d[21]?c.i64.cast([0,1]):c.i64.cast([0,3])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,2]))?d[21]=c.i64.cast([0,3]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,4]))?(d[23]=d[2].get("send_by_server"),d[2],d[24]=d[2].get("use_double_phase"),d[2],d[22]=d[23]?d[24]?c.i64.cast([0,13]):f:c.i64.cast([0,5])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,6]))?(d[24]=d[2].get("use_double_phase"),d[2],d[23]=d[24]?c.i64.cast([0,13]):f):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,14]))?(d[25]=d[2].get("use_double_phase"),d[2],d[26]=d[2].get("should_transcode"),d[2],d[24]=d[25]?d[26]?c.i64.cast([0,7]):c.i64.cast([0,9]):f):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,8]))?d[25]=c.i64.cast([0,9]):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,10]))?(d[27]=d[2].get("send_by_server"),d[2],d[26]=d[27]?f:c.i64.cast([0,11])):(c.i64.eq(c.i64.cast([0,6]),c.i64.cast([0,12]))?d[27]=f:d[27]=f,d[26]=d[27]),d[25]=d[26]),d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),c.i64.neq(d[19],f)?c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:d[19]})})},function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}]):c.resolve())):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[15])))}])}]):c.i64.eq(d[5],c.i64.cast([0,11]))?c.seq([function(b){return d[13]=f,c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[14]=a.error,c.i64.neq(d[14],f)?d[13]=d[14]:0})},function(a){return c.i64.neq(d[13],f)?(d[1].set("resume_failed",!0),d[1].set("error",d[13])):d[1].set("main_job_succeeded",!0)}]):c.i64.eq(d[5],c.i64.cast([0,13]))?c.seq([function(e){return c.sp(b("LSInsertPhase2PendingTask"),a[0],a[1]).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.i64.neq(d[13],f)?c.resolve((d[1].set("resume_failed",!0),d[1].set("error",d[13]))):c.seq([function(b){return c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){var b=a.update;a.item;return b({state:c.i64.cast([0,14])})})},function(b){return d[1].set("main_job_succeeded",!0),c.fe(c.ftr(c.db.table(51).fetch(),function(b){return b.offlineThreadingId===a[0]}),function(a){a=a.item;return d[4].set(a.offlineAttachmentId,a.state)})}])}]):c.resolve(0)):c.resolve((d[1].set("resume_failed",!0),d[1].set("error",c.i64.cast([0,11]))))},function(a){return d[7]=d[1].get("main_job_succeeded"),d[1],d[8]=d[1].get("resume_failed"),d[1],d[9]=d[1].get("error"),d[1],a=[d[7],d[8],d[9],d[4]],e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("MWConsole",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){}g.log=a}),98);
__d("MWPOpenComposerUtils",["I64","LSRemoveMediaSendJobs","LSResumeMediaSendJob","MWConsole","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,c){return a.table("media_staging").get({hd:c,tl:0}).then(function(d){if(d!=null)return a.table("media_staging")["delete"]({hd:c,tl:0});else return(i||(i=b("Promise"))).resolve()})}function e(a,c,d){return a.table("media_staging").get({hd:c,tl:0}).then(function(c){if(c!=null)return a.table("media_staging").put(d(c));else return(i||(i=b("Promise"))).resolve()})}function f(a,c,d,e,f){return a.table("attachments").get({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}}).then(function(g){if(g!=null)return a.table("attachments").upsert({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}},f(g));else return(i||(i=b("Promise"))).resolve()})}function j(a,e,f){return c("LSResumeMediaSendJob")(e,(h||(h=d("I64"))).zero,(f=f)!=null?f:void 0,a).then(function(d){d=d[0];if(d)return c("LSRemoveMediaSendJobs")(e,a);else return(i||(i=b("Promise"))).resolve()})}g.deleteMediaStaging=a;g.updateMediaStaging=e;g.updateAttachment=f;g.resumeSendJob=j}),98);
__d("getVendorPrefixedName",["invariant","ExecutionEnvironment","UserAgent","camelize"],(function(a,b,c,d,e,f,g,h){var i,j={},k=["Webkit","ms","Moz","O"],l=new RegExp("^("+k.join("|")+")"),m=(i||(i=c("ExecutionEnvironment"))).canUseDOM?document.createElement("div").style:{};function n(a){for(var b=0;b<k.length;b++){var c=k[b]+a;if(c in m)return c}return null}function o(a){switch(a){case"lineClamp":return c("UserAgent").isEngine("WebKit >= 315.14.2")?"WebkitLineClamp":null;default:return null}}function a(a){var b=c("camelize")(a);if(j[b]===void 0){var d=b.charAt(0).toUpperCase()+b.slice(1);l.test(d)&&h(0,957,a);(i||(i=c("ExecutionEnvironment"))).canUseDOM?j[b]=b in m?b:n(d):j[b]=o(b)}return j[b]}g["default"]=a}),98);
__d("BrowserSupportCore",["getVendorPrefixedName"],(function(a,b,c,d,e,f){"use strict";a={hasCSSAnimations:function(){return!!b("getVendorPrefixedName")("animationName")},hasCSSTransforms:function(){return!!b("getVendorPrefixedName")("transform")},hasCSS3DTransforms:function(){return!!b("getVendorPrefixedName")("perspective")},hasCSSTransitions:function(){return!!b("getVendorPrefixedName")("transition")}};c=a;f["default"]=c}),66);
__d("BrowserSupport",["BrowserSupportCore","ExecutionEnvironment","UserAgent_DEPRECATED","getVendorPrefixedName","memoize"],(function(a,b,c,d,e,f,g){var h,i,j,k=null;function l(){if((j||(j=c("ExecutionEnvironment"))).canUseDOM){k||(k=document.createElement("div"));return k}return null}b=function(a){return c("memoize")(function(){var b=l();return!b?!1:a(b)})};e=b(function(a){a.style.cssText="position:-moz-sticky;position:-webkit-sticky;position:-o-sticky;position:-ms-sticky;position:sticky;";return/sticky/.test(a.style.position)});f=b(function(a){return"scrollSnapType"in a.style||"webkitScrollSnapType"in a.style||"msScrollSnapType"in a.style});var m=b(function(a){return"scrollBehavior"in a.style});b=b(function(a){if(!("pointerEvents"in a.style))return!1;a.style.cssText="pointer-events:auto";return a.style.pointerEvents==="auto"});var n=(h=c("memoize"))(function(){return!(d("UserAgent_DEPRECATED").webkit()&&!d("UserAgent_DEPRECATED").chrome()&&d("UserAgent_DEPRECATED").windows())&&"FileList"in window&&"FormData"in window}),o=h(function(){return!!a.blob}),p=h(function(){return(j||(j=c("ExecutionEnvironment"))).canUseDOM&&document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString().includes("SVGForeignObject")}),q=h(function(){return!!window.MutationObserver});h=h(function(){var a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd"},b=c("getVendorPrefixedName")("transition");return a[b]||null});var r=function(){return!!window.CanvasRenderingContext2D};g.hasCSSAnimations=(i=c("BrowserSupportCore")).hasCSSAnimations;g.hasCSSTransforms=i.hasCSSTransforms;g.hasCSS3DTransforms=i.hasCSS3DTransforms;g.hasCSSTransitions=i.hasCSSTransitions;g.hasPositionSticky=e;g.hasScrollSnapPoints=f;g.hasScrollBehavior=m;g.hasPointerEvents=b;g.hasFileAPI=n;g.hasBlobFactory=o;g.hasSVGForeignObject=p;g.hasMutationObserver=q;g.getTransitionEndEvent=h;g.hasCanvasRenderingContext2D=r}),98);
__d("DOMControl",["$","DataStore"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.root=b("$").fromIDOrElement(a),this.updating=!1,b("DataStore").set(a,"DOMControl",this)}var c=a.prototype;c.getRoot=function(){return this.root};c.beginUpdate=function(){if(this.updating)return!1;this.updating=!0;return!0};c.endUpdate=function(){this.updating=!1};c.update=function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate()};c.onupdate=function(a){};a.getInstance=function(a){return b("DataStore").get(a,"DOMControl")};return a}();e.exports=a}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(a,b,c,d,e,f,g){function h(a){return!/\S/.test(a||"")}function i(a){return h(a.value)}function a(a){return i(a)?"":a.value}function b(a){return a.value}function e(a,b){a.value=b||"";b=c("DOMControl").getInstance(a);b&&b.resetHeight&&b.resetHeight()}function f(a,b){b||(b=""),a.setAttribute("aria-label",b),a.setAttribute("placeholder",b)}function j(a){a.value="",a.style.height=""}function k(a,b){d("CSS").conditionClass(a,"enter_submit",b)}function l(a){return d("CSS").hasClass(a,"enter_submit")}function m(a,b){b>0?a.setAttribute("maxlength",b.toString()):a.removeAttribute("maxlength")}g.isWhiteSpaceOnly=h;g.isEmpty=i;g.getValue=a;g.getValueRaw=b;g.setValue=e;g.setPlaceholder=f;g.reset=j;g.setSubmitOnEnter=k;g.getSubmitOnEnter=l;g.setMaxLength=m}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(a,b,c,d,e,f,g){var h,i,j="FileList"in window,k="FormData"in window;function l(a){var b={};(h||(h=c("PHPQuerySerializer"))).serialize(a).split("&").forEach(function(a){if(a){a=/^([^=]*)(?:=(.*))?$/.exec(a);var d=(i||(i=c("URI"))).decodeComponent(a[1]),e=a[2]!==void 0;e=e?(i||(i=c("URI"))).decodeComponent(a[2]):null;b[d]=e}});return b}var m={getInputs:function(a){a===void 0&&(a=document);return[].concat(d("DOMQuery").scry(a,"input"),d("DOMQuery").scry(a,"select"),d("DOMQuery").scry(a,"textarea"),d("DOMQuery").scry(a,"button"))},getInputsByName:function(a){var b={};m.getInputs(a).forEach(function(a){var c=b[a.name];b[a.name]=c===void 0?a:[a].concat(c)});return b},getSelectValue:function(a){return a.options[a.selectedIndex].value},setSelectValue:function(a,b){for(var c=0;c<a.options.length;++c)if(a.options[c].value===b){a.selectedIndex=c;break}},getRadioValue:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return null},getElements:function(a){return a.tagName==="FORM"&&a.elements!==a?Array.from(a.elements):m.getInputs(a)},getAttribute:function(a,b){return(a.getAttributeNode(b)||{}).value||null},setDisabled:function(a,b){m.getElements(a).forEach(function(a){if(a.disabled!==void 0){var d=c("DataStore").get(a,"origDisabledState");b?(d===void 0&&c("DataStore").set(a,"origDisabledState",a.disabled),a.disabled=b):d===!1&&(a.disabled=!1)}})},forEachValue:function(a,b,c){m.getElements(a).forEach(function(a){if(!a.name||a.disabled)return;if(a.type==="submit")return;if(a.type==="reset"||a.type==="button"||a.type==="image")return;if((a.type==="radio"||a.type==="checkbox")&&!a.checked)return;if(a.nodeName==="SELECT"){for(var b=0,e=a.options.length;b<e;b++){var f=a.options[b];f.selected&&c("select",a.name,f.value)}return}if(a.type==="file"){if(j){f=a.files;for(b=0;b<f.length;b++)c("file",a.name,f.item(b))}return}c(a.type,a.name,d("Input").getValue(a))}),b&&b.name&&b.type==="submit"&&d("DOMQuery").contains(a,b)&&d("DOMQuery").isNodeOfType(b,["input","button"])&&c("submit",b.name,b.value)},createFormData:function(a,b){if(!k)return null;var d=new FormData();if(a)if(c("isNode")(a))m.forEachValue(a,b,function(a,b,c){d.append(b,c)});else{b=l(a);for(a in b)b[a]==null?d.append(a,""):d.append(a,b[a])}return d},serialize:function(a,b){var c={};m.forEachValue(a,b,function(a,b,d){if(a==="file")return;m._serializeHelper(c,b,d)});return m._serializeFix(c)},_serializeHelper:function(a,b,c){var d=Object.prototype.hasOwnProperty,e=/([^\]]+)\[([^\]]*)\](.*)/.exec(b);if(e){if(!a[e[1]]||!d.call(a,e[1])){a[e[1]]=d={};if(a[e[1]]!==d)return}d=0;if(e[2]==="")while(a[e[1]][d]!==void 0)d++;else d=e[2];e[3]===""?a[e[1]][d]=c:m._serializeHelper(a[e[1]],d.concat(e[3]),c)}else a[b]=c},_serializeFix:function(a){for(var b in a)a[b]instanceof Object&&(a[b]=m._serializeFix(a[b]));b=Object.keys(a);if(b.length===0||b.some(isNaN))return a;b.sort(function(a,b){return a-b});var c=0,d=b.every(function(a){return+a===c++});return d?b.map(function(b){return a[b]}):a},post:function(a,b,e,f){f===void 0&&(f=!0);a=new(i||(i=c("URI")))(a);var g=document.createElement("form");g.action=a.toString();g.method="POST";g.style.display="none";var h=!c("isFacebookURI")(a);if(e){if(h){g.rel="noreferrer";if(e==="_blank"){e=btoa(c("Random").uint32());var j=window.open("about:blank",e);j!==void 0&&(j.opener=null)}}g.target=e}if(f&&(!h&&a.getSubdomain()!=="apps")){j=d("DTSG").getToken();j&&(b.fb_dtsg=j,c("SprinkleConfig").param_name&&(b[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(j)));c("LSD").token&&(b.lsd=c("LSD").token,c("SprinkleConfig").param_name&&!j&&(b[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(c("LSD").token)))}m.createHiddenInputs(b,g);d("DOMQuery").getRootElement().appendChild(g);g.submit();return!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(a,b,c){m.post(a,b,c)},createHiddenInputs:function(a,b,d,e){e===void 0&&(e=!1);d=d||{};a=l(a);for(var f in a){if(a[f]===null)continue;if(d[f]&&e)d[f].value=a[f];else{var g=c("DOM").create("input",{type:"hidden",name:f,value:a[f]});d[f]=g;b.appendChild(g)}}return d},getFirstElement:function(a,b){b===void 0&&(b=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);var e=[];for(var f=0;f<b.length;f++){e=d("DOMQuery").scry(a,b[f]);for(var g=0;g<e.length;g++){var h=e[g];try{var i=c("getElementPosition")(h);if(i.y>0&&i.x>0)return h}catch(a){}}}return null},focusFirst:function(a){a=m.getFirstElement(a);if(a){a.focus();return!0}return!1}};f.exports=m}),34);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);b.parseFiles=function(a){var b={};c("forEachObject")(a,function(a,c){if(Array.isArray(a))b[c]=a;else{b[c]=[];if(a instanceof window.FileList)for(var d=0;d<a.length;d++)b[c].push(a.item(d));else(a instanceof window.File||a instanceof window.Blob)&&b[c].push(a)}});return b};function b(b){var c;c=a.call(this)||this;c._allowCrossOrigin=!1;c._allowCrossPageTransition=!1;c._customHeader={};c._inFlight=!1;c._limit=10;c._option={};c._preventDefaultErrorHandler=!1;c._suspended=!1;b&&c.setURI(b);c.setNetworkErrorRetryLimit(0);return c}var e=b.prototype;e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};e.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};e.setData=function(a){this._data=a;return this};e.setOption=function(a,b){this._option[a]=b;return this};e.setPreventDefaultErrorHandler=function(a){this._preventDefaultErrorHandler=a;return this};e.setLimit=function(a){this._limit=a;return this};e.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};e.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};e.setRelativeTo=function(a){this._relativeTo=a;return this};e.setStatusElement=function(a){this._statusElement=a;return this};e.setURI=function(a){this._uri=a;return this};e.suspend=function(){this._suspended=!0;return this};e.resume=function(){this._suspended=!1;this._processQueue();return this};e.isUploading=function(){return this._inFlight};e._createFileUpload=function(a,b,c){return new h(a,b,c)};e._processQueue=function(){if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var a=this._waiting.shift(),b=this._preprocessHandler;b?b(a,this._processUpload.bind(this)):this._processUpload(a);this._pending.push(a)}};e._processUpload=function(a){var b=d("Form").createFormData(a.getData()||this._data);if(a.getFile()){b.append(a.getName(),a.getFile());var e=a.getFile().uploadID;e&&b.append("upload_id",e);a.getAdditionalData().forEach(function(a,c){return b.append(c,a)})}e=new(c("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(b).setStatusElement(this._statusElement).setHandler(this._success.bind(this,a)).setErrorHandler(this._failure.bind(this,a)).setUploadProgressHandler(this._progress.bind(this,a)).setInitialHandler(this._initial.bind(this,a));for(var f in this._option)e.setOption(f,this._option[f]);for(f in this._customHeader)e.setRequestHeader(f,this._customHeader[f]);this._relativeTo&&e.setRelativeTo(this._relativeTo);e.send();a.setAsyncRequest(e);this._inFlight=!0;a.getRetryCount()||this.inform("start",a)};e._abort=function(a){this._pending.indexOf(a)!==-1&&(c("removeFromArray")(this._pending,a),this._processQueue()),c("removeFromArray")(this._waiting,a),a.abort()};e._initial=function(a){if(a.isAborted())return;this.inform("initial",a)};e._success=function(a,b){if(a.isAborted()){this.inform("success_after_abort",b);return}this._complete(a);this.inform("success",a.handleSuccess(b));this._processQueue()};e._retryUpload=function(a){a.increaseRetryCount(),this._processUpload(a)};e._failure=function(a,b){if(a.isAborted())return;if(b.error===1004&&a.getRetryCount()<(this._retryLimit||0))return this._retryUpload(a);this._complete(a);this.inform("failure",a.handleFailure(b))!==!1&&(this._preventDefaultErrorHandler||c("AsyncResponse").defaultErrorHandler(b));this._processQueue()};e._progress=function(a,b){if(a.isAborted())return;this.inform("progress",a.handleProgress(b))};e._complete=function(a){c("removeFromArray")(this._pending,a),this._pending.length||(this._inFlight=!1)};b.isSupported=function(){return d("BrowserSupport").hasFileAPI()};return b}(c("mixin")(c("ArbiterMixin")));var h=function(){function a(a,b,c){this._additionalData=new Map(),this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=a,this._file=b,this._data=c}var b=a.prototype;b.getName=function(){return this._name};b.getFile=function(){return this._file};b.setFile=function(a){this._file=a};b.getData=function(){return this._data};b.getAdditionalData=function(){return this._additionalData};b.isComplete=function(){return this._success!==null};b.isSuccess=function(){return this._success===!0};b.getResponse=function(){return this._response};b.getProgressEvent=function(){return this._progressEvent};b.setAsyncRequest=function(a){this._request=a;return this};b.increaseRetryCount=function(){this._numRetries++;return this};b.getRetryCount=function(){return this._numRetries};b.isWaiting=function(){return!this._request};b.isAborted=function(){return this._aborted};b.abort=function(){this._request=null,this._aborted=!0};b.handleSuccess=function(a){this._success=!0;this._response=a;this._progressEvent=null;return this};b.handleFailure=function(a){this._success=!1;this._response=a;this._progressEvent=null;return this};b.handleProgress=function(a){this._progressEvent=a;return this};return a}();g["default"]=a}),98);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c._files=null,c._uploads=[],c._fileLessUpload=null,b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.setFiles=function(a){this._files=c("AsyncUploadBase").parseFiles(a);return this};d.setAlwaysReturnResponse=function(a){this._shouldAlwaysReturnResponse=a};d.abort=function(){var a=this;this._uploads.forEach(function(b){return a._abort(b)})};d.send=function(){var a=this;if(this._inFlight)return;this._inFlight=!0;this._uploads=[];for(var b in this._files)this._files[b].forEach(function(c){a._uploads.push(a._createFileUpload(b,c))});this._waiting=this._uploads.slice(0);this._pending=[];this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))};d._processQueue=function(){a.prototype._processQueue.call(this);if(!this._pending.length&&!this._waiting.length){var b=this._uploads;b=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:b}:{response:b[0].getResponse(),uploads:b}:b;this.inform("complete",b)}};b.isSupported=function(){return c("AsyncUploadBase").isSupported()};return b}(c("AsyncUploadBase"));g["default"]=a}),98);
__d("BehaviorsMixin",[],(function(a,b,c,d,e,f){var g=function(){function a(a){this.$1=a,this.$2=!1}var b=a.prototype;b.enable=function(){this.$2||(this.$2=!0,this.$1.enable())};b.disable=function(){this.$2&&(this.$2=!1,this.$1.disable())};return a}(),h=1;function i(a){a.__BEHAVIOR_ID||(a.__BEHAVIOR_ID=h++);return a.__BEHAVIOR_ID}a={enableBehavior:function(a){this._behaviors||(this._behaviors={});var b=i(a);this._behaviors[b]||(this._behaviors[b]=new g(new a(this)));this._behaviors[b].enable();return this},disableBehavior:function(a){if(this._behaviors){a=i(a);this._behaviors[a]&&this._behaviors[a].disable()}return this},enableBehaviors:function(a){a.forEach(this.enableBehavior,this);return this},destroyBehaviors:function(){if(this._behaviors){for(var a in this._behaviors)this._behaviors[a].disable();this._behaviors={}}},hasBehavior:function(a){return this._behaviors&&i(a)in this._behaviors}};b=a;f["default"]=b}),66);
__d("shield",[],(function(a,b,c,d,e,f){function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if(typeof a!=="function")throw new TypeError("shield expects a function as the first argument");return function(){return a.apply(b,d)}}f["default"]=a}),66);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","DOMQuery","DataStore","Event","FBLogger","Form","Parent","isElementNode","mixin","setTimeout","shield"],(function(a,b,c,d,e,f,g){function h(a){var b={};a=d("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){b[a.name]=a.files});return b}function i(a){a=d("DOMQuery").scry(a,'input[type="file"]');a.forEach(function(a){a.files=null})}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;g=a.call(this)||this;g._allowCrossOrigin=!1;g._allowCrossPageTransition=!1;g._uploadInParallel=!1;g._handleSubmit=function(a){if(a.isDefaultPrevented()||a.getTarget()!==g._form)return;if(g.inform("submit")===!1){a.prevent();return}g.submit(a)};g._click=function(a){a=a.getTarget();while(c("isElementNode")(a)){if(a.type==="submit"){g._clickTarget=a;c("setTimeout")(g._unclick,0);break}a=a.parentNode}};g._unclick=function(){g._clickTarget=null};g.initial=function(a){return g.inform("initial",{upload:a})};if(b.getAttribute("rel")==="async")throw c("FBLogger")("FileForm","primer-only").mustfixThrow("FileForm cannot be used with Primer forms.");if((b.getAttribute("method")||"").toUpperCase()!=="POST")throw c("FBLogger")("FileForm","post-only").mustfixThrow("FileForm must be used with POST forms.");g._form=b;g._previousEncoding=g._form.enctype;g._form.enctype=g._form.encoding="multipart/form-data";g._files=null;g._customHeader={};e&&g.enableBehaviors(e);g._options=f||{};g.setAllowCrossOrigin(g._options.allowCrossOrigin);g.setAllowCrossPageTransition(g._options.allowCrossPageTransition);g.setUploadInParallel(g._options.uploadInParallel);g.setConcurrentLimit(g._options.concurrentLimit);g.setPreprocessHandler(g._options.preprocessHandler);g.setNetworkErrorRetryLimit(g._options.networkErrorRetryLimit);g._listeners=[c("Event").listen(document.documentElement,"submit",g._handleSubmit),c("Event").listen(g._form,"click",g._click)];d("DataStore").set(g._form,"FileForm",babelHelpers.assertThisInitialized(g));return g}var e=b.prototype;e.getRoot=function(){return this._form};e.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};e.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};e.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};e.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};e.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};e.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};e.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};e.setFiles=function(a){this._files=a;return this};e.submit=function(a){var b=this,e;if(this._uploadInParallel&&c("AsyncUploadRequest").isSupported()){e=new(c("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(d("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var f in this._customHeader)e.setCustomHttpHeader(f,this._customHeader[f]);this._concurrentLimit&&e.setLimit(this._concurrentLimit);this._files?e.setFiles(this._files):e.setFiles(h(this._form));var g=[e.subscribe("progress",function(a,c){b.progress(c,c.getProgressEvent())}),e.subscribe("initial",function(a,c){b.initial(c)}),e.subscribe("success",function(a,c){b.success(c,c.getResponse())}),e.subscribe("start",function(a,c){b.inform("start",{upload:c})}),e.subscribe("failure",function(a,c){b.failure(c,c.getResponse());return!1}),e.subscribe("complete",function(){while(g.length)g.pop().unsubscribe()})]}else(function(){var a,f=b._files;if(f){a=d("Form").createFormData(d("Form").serialize(b._form,b._clickTarget));var g=c("AsyncUploadRequest").parseFiles(f);f=function(b){var c=g[b];c.length===1?a.append(b,c[0]):(b+="[]",c.forEach(function(c){a.append(b,c)}));b};for(var h in g)f(h)}else a=d("Form").createFormData(b._form,b._clickTarget);e=new(c("AsyncRequest"))().setRawData(a).setHandler(function(a){return b.success(null,a)}).setErrorHandler(function(a){return b.failure(null,a)}).setUploadProgressHandler(function(a){return b.progress(null,a)}).setInitialHandler(c("shield")(b.initial,b,null));b.inform("start",{upload:null})})();e.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=e;a&&a.prevent()};e.success=function(a,b){b={response:b,upload:a};this.inform("success",b)!==!1&&c("Event").fire(this._form,"success",b);this._cleanup()};e.failure=function(a,b){a={response:b,upload:a};this.inform("failure",a)!==!1&&(c("Event").fire(this._form,"error",a)!==!1&&c("AsyncResponse").defaultErrorHandler(b));this._cleanup()};e.progress=function(a,b){this.inform("progress",{event:b,upload:a})};e.abort=function(){this._request&&(this._request.abort(),this._cleanup())};e.clear=function(){i(this._form)};e.destroy=function(){this._cleanup();while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;d("DataStore").remove(this._form,"FileForm")};e._cleanup=function(){this._request=null};e._getStatusElement=function(){return d("Parent").byClass(this._form,"stat_elem")||this._form};b.getInstance=function(a){return d("DataStore").get(a,"FileForm")};return b}(c("mixin")(c("ArbiterMixin"),c("BehaviorsMixin")));Object.assign(a,{EVENTS:["start","submit","initial","progress","success","failure"]});g["default"]=a}),98);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c._inputElem=b;c._data={};return c}var d=c.prototype;d.setInput=function(a){this._inputElem=a;return this};d.setURI=function(a){this._uri=a;return this};d.setData=function(a){this._data=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setFiles=function(a){this._files=a;return this};d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};d.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};d.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())};d.send=function(){this._createForm();var a=this._inputElem&&!this._inputElem.parentElement;if(!a&&this._inputElem){var c=this._inputElem.cloneNode(!1);b("DOM").replace(this._inputElem,c)}this._inputElem&&b("DOM").appendContent(this._formElem,this._inputElem);b("DOM").appendContent(document.body,this._formElem);this._fileForm.submit();!a&&this._inputElem&&b("DOM").replace(c,this._inputElem);this._removeFormEl()};d._onFileFormEvent=function(a,b){(a==="success"||a==="failure")&&this._destroyFileForm();return this.inform(a,b)};d._createForm=function(){var a;this._destroyFileForm();this._formElem=b("DOM").create("form",{action:this._uri,method:"post"});this._fileForm=new(b("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(a=this._concurrentLimit)!=null?a:0,preprocessHandler:(a=this._preprocessHandler)!=null?a:null,networkErrorRetryLimit:(a=this._retryLimit)!=null?a:0});this._files&&this._fileForm.setFiles(this._files);this._fileForm.subscribe(b("FileForm").EVENTS,this._onFileFormEvent.bind(this));b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this._data),this._formElem)};d._removeFormEl=function(){b("DOM").remove(this._formElem),this._formElem=null};d._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){function g(a){return h(a)[0]==="image"}function a(a){var b=h(a);return g(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}function h(a){return a.split("/")}f.isImage=g;f.isJpeg=a}),66);
__d("PhotosUploadID",[],(function(a,b,c,d,e,f){var g=1024;function a(){return(g++).toString()}f.getNewID=a}),66);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(a,b,c,d,e,f,g){function a(a){var b=h(a).length;a=i(a).length;return b>a}function b(a){return h(a).length>0}function d(a){return j(a).length>0}function h(a){return k(a,c("VideoUploadConfig").videoExtensions)}function i(a){var b={gif:!0};return k(a,b)}function j(a){return k(a,c("ComposerXNativeAudioUploadsConfig").audioExtensions)}function k(a,b){return a.filter(function(a){a=a.indexOf(".")!==-1?a.split(".").pop().toLowerCase():"";return b[a]})}g.hasEditableVideos=a;g.hasVideos=b;g.hasAudioFiles=d;g.filterVideos=h;g.filterNonEditableVideos=i;g.filterAudioFiles=j;g.filterFileOfSupportedType=k}),98);
__d("ImageExif",["exif-js"],(function(a,b,c,d,e,f){b("exif-js").enableXmp();function g(a){var b=function(b){return a.charCodeAt(b)&255};this.getByteAt=b;this.getShortAt=function(a,b){a=this.getSShortAt(a,b);return a>0?a:a+65536};this.getSShortAt=function(a,c){var d=b(a);a=b(a+1);return c?(d<<8)+a:(a<<8)+d};this.getLongAt=function(a,b){a=this.getSLongAt(a,b);return a>0?a:a+4294967296};this.getSLongAt=function(a,c){var d=b(a),e=b(a+1),f=b(a+2);a=b(a+3);return c?(((d<<8)+e<<8)+f<<8)+a:(((a<<8)+f<<8)+e<<8)+d};this.getStringAt=function(b,c){return a.substr(b,c)};this.getLength=function(){return a.length}}a={readFromFile:function(a,b){var c=this,d=new FileReader();d.addEventListener("load",function(a){a=a.target.result;a=a instanceof ArrayBuffer?c.readFromArrayBuffer(a):c.readFromBinaryString(a);b(a)},!1);window.DataView?d.readAsArrayBuffer(a):d.readAsBinaryString(a)},readFromBinaryString:function(a){return b("exif-js").readFromBinaryFile(new g(a))},readFromArrayBuffer:function(a){return b("exif-js").readFromBinaryFile(a)}};e.exports=a}),null);
__d("StringEncoding",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a=new Uint8Array(a);var c=0,d=[];while(c<a.length){var e=a[c],f=void 0;if(e>>7===0)f=1;else if(e>>5===6)e&=31,f=2;else if(e>>4===14)e&=15,f=3;else if(e>>3===30)e&=7,f=4;else if(e>>2===62)e&=3,f=5;else if(e>>1===126)e&=1,f=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(c+f>a.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var g=1;g<f;g++){var h=a[c+g];if(h>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");h&=63;e<<=6;e|=h}if(e>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!e)switch(b){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(e);c+=f}return String.fromCodePoint.apply(String,d)}function g(a){return(a&255)<<8|a>>8}function b(a,b){if(a.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");a=new Uint16Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==65534&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=g(f));var h=f;if(f>55295&&f<57344){if((f&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(c+1>=a.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++c;var i=a[c];e&&(i=g(i));if((i&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");h=((f&1023)<<10|i&1023)+65536}if(!h)switch(b){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(h);++c}return String.fromCodePoint.apply(String,d)}function h(a){return(a&255)<<24|(a&255<<8)<<8|(a&255<<16)>>8|a>>>24}function c(a,b){if(a.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");a=new Uint32Array(a);var c=0,d=[],e=!1;a[0]===65279?++c:a[0]==4294836224&&(++c,e=!0);while(c<a.length){var f=a[c];e&&(f=h(f));if(f&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(f>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!f)switch(b){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,d);case"include":break}d.push(f);++c}return String.fromCodePoint.apply(String,d)}var i={"utf-8":a,"utf-16":b,"utf-32":c};d=function(){function a(a,b){a?this.$1=a:this.$1=["utf-8","utf-16","utf-32"];b||(b="error");this.$2=b;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$3(d)}}var b=a.prototype;b.getPrecedence=function(){return this.$1};b.decode=function(a){var b=[];for(var c=this.$1,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=this.$3(f);try{return f(a,this.$2)}catch(a){b.push(a)}}throw new Error(b.join(", "))};b.$3=function(a){var b=i[a];if(!b)throw new Error("Unknown encoding "+a);return b};return a}();f.Decoder=d}),66);
__d("ImageMetadata",["ImageExif","Promise","StringEncoding","emptyFunction","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;e=function(){function e(a){this.$4="",this.$6=a,this.$7=new Uint8Array(a),this.$8()}var f=e.prototype;f.$8=function(){var a=0;while(a<this.$7.length){a=this.$9(a);if(a===-1)return;var b=this.$7[a+1];b=i[b];if(!b)return;var c=b.length;c===void 0&&(c=this.$7[a+2]*256+this.$7[a+3]);this.$10(a,c,b);if(b.name==="SOS")return;a+=2+c}};f.$10=function(a,b,c){switch(c.name){case"APP1":this.$11(a+4,j)?(this.$1||(this.$1=a,this.$2=b),this.$12(a+4+j.length,b-2-j.length)):this.$11(a+4,k)?(this.$1=a,this.$2=b,this.$13(a+4+k.length,b-2-k.length)):this.$11(a+4,l)&&this.$14(a+4+l.length,b-2-l.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(a+4,b-2);break}};f.$15=function(a,b){b=this.$7[a+3]*256+this.$7[a+4];a=this.$7[a+1]*256+this.$7[a+2];b>0&&a>0&&(this.$5={x:b,y:a})};f.$12=function(a,b){a=emptyFunction;try{emptyFunction=c("emptyFunction");var e=d("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{emptyFunction=a}b={};for(a in e){var f=e[a];typeof f==="string"&&(f=f.trim());b[a.trim()]=f}this.$3=b};f.$13=function(a,b){var c=new(d("StringEncoding").Decoder)(null,"truncate");try{c=c.decode(this.$6.slice(a,a+b));this.$4=c}catch(a){return}};f.$14=function(a){};f.$11=function(a,b){var c=this;return b.split("").every(function(b){return c.$7[a++]===b.charCodeAt(0)})};f.$9=function(a){for(a=a;a+1<this.$7.length;++a)if(this.$7[a]===255&&this.$7[a+1]!==0&&this.$7[a+1]!==255)return a;return-1};f.hasAPP1=function(){return Boolean(this.$1)};f.hasExif=function(){return Boolean(this.$3)};f.hasXMP=function(){return Boolean(this.$4)};f.hasSize=function(){return Boolean(this.$5)};f.getAPP1Location=function(){return!this.hasAPP1()?null:this.$1};f.getAPP1Length=function(){return!this.hasAPP1()?null:this.$2};f.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3};f.getXMPString=function(){return this.$4};f.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5};f.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength};e.genMetadataFromBlob=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.t0=e;c.next=3;return b("regeneratorRuntime").awrap(e.$16(a));case 3:c.t1=c.sent;return c.abrupt("return",new c.t0(c.t1));case 5:case"end":return c.stop()}},null,this)};e.$16=function(c){return new(h||(h=b("Promise")))(function(b,d){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=b;e.readAsArrayBuffer(c)})};return e}();var i=[];i[216]={name:"SOI",length:0};i[192]={name:"SOF0"};i[193]={name:"SOF1"};i[194]={name:"SOF2"};i[195]={name:"SOF3"};i[197]={name:"SOF5"};i[198]={name:"SOF6"};i[199]={name:"SOF7"};i[200]={name:"JPG"};i[201]={name:"SOF9"};i[202]={name:"SOF10"};i[203]={name:"SOF11"};i[205]={name:"SOF13"};i[206]={name:"SOF14"};i[207]={name:"SOF15"};i[196]={name:"DHT"};i[219]={name:"DQT"};i[221]={name:"DRI",length:2};i[218]={name:"SOS"};i[208]={name:"RST0",length:0};i[209]={name:"RST1",length:0};i[210]={name:"RST2",length:0};i[211]={name:"RST3",length:0};i[212]={name:"RST4",length:0};i[213]={name:"RST5",length:0};i[214]={name:"RST6",length:0};i[215]={name:"RST7",length:0};i[224]={name:"APP0"};i[225]={name:"APP1"};i[226]={name:"APP2"};i[227]={name:"APP3"};i[228]={name:"APP4"};i[229]={name:"APP5"};i[230]={name:"APP6"};i[231]={name:"APP7"};i[232]={name:"APP8"};i[233]={name:"APP9"};i[234]={name:"APP10"};i[235]={name:"APP11"};i[236]={name:"APP12"};i[237]={name:"APP13"};i[238]={name:"APP14"};i[239]={name:"APP15"};i[254]={name:"COM"};i[217]={name:"EOI",length:0};var j="Exif\0\0",k="http://ns.adobe.com/xap/1.0/\0",l="http://ns.adobe.com/xmp/extension/\0";g["default"]=e}),98);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["ImageMetadata","Promise","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=2048;d=function(){function d(){}d.genArrayBufferFromBlob=function(c){return new(h||(h=b("Promise")))(function(b,d){if(a.FileReader){var e=new a.FileReader();e.onabort=d;e.onerror=d;e.onload=function(a){b(a.target.result)};e.readAsArrayBuffer(c)}else d(new Error("global.FileReader doesn't exit"))})};d.shouldCheckInServer=function(a){if(!a.hasExif()&&!a.hasXMP()||!a.hasSize())return!1;var b=a.getXMPString();if(this.getMayContainSphericalMetadata(b))return!0;var c=a.getSize(),d=c.x;c=c.y;if(Math.max(d,c)<i||d/c<2&&c/d<2)return!1;c=a.hasExif()?a.getExif():{};return b===""&&(!c.Make||!c.Model)?!1:!0};d.genPhotosphereMetadata=function(a){var d=this;return new(h||(h=b("Promise")))(function(b,e){c("promiseDone")(d.genArrayBufferFromBlob(a),function(a){try{var f=new(c("ImageMetadata"))(a);d.shouldCheckInServer(f)?c("promiseDone")(d.genPhotosphereMetadataFromServer(f.hasSize()?f.getSize():{x:0,y:0},f.getXMPString(),f.hasExif()?f.getExif():{}),function(a){a=a.payload;b({photoSphereMetadata:a,imageMetadata:f})},e):b({})}catch(a){a.__manual=!0,e(a)}},e)})};d.genPhotosphereMetadataFromServer=function(a,d,e){var f=this;return new(h||(h=b("Promise")))(function(b,g){new(c("XAsyncRequest"))(c("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:f.getExifString(e),height:a.y,width:a.x,xmp:d}).setHandler(b).setErrorHandler(g).send()})};d.getExifString=function(a){return JSON.stringify(a,function(a,b){return a==="FocalLength"&&b.numerator&&b.denominator?b.numerator+"/"+b.denominator:b})};d.getMayContainSphericalMetadata=function(a){return a!==""&&a.indexOf("GPano:")>-1};return d}();g["default"]=d}),98);
__d("SphericalImage",["SphericalImageUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="ProjectionType";a=function(){function a(a){this.props=a}a.createFromBlob=function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(c("SphericalImageUtils").genPhotosphereMetadata(a));case 2:d=e.sent;return e.abrupt("return",new this(d));case 4:case"end":return e.stop()}},null,this)};var d=a.prototype;d.isSpherical=function(){return Boolean(this.props.photoSphereMetadata)};d.getImageMetadata=function(){return this.props.imageMetadata};d.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata};d.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null};d.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null};d.getProjectionType=function(){var a="";this.props.photoSphereMetadata&&this.props.photoSphereMetadata[h]&&(a=this.props.photoSphereMetadata[h]);return a};return a}();g["default"]=a}),98);
__d("SphericalPhotoUploadHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return b&&Math.max(b.x,b.y)<=c||a==="cubestrip"?!1:!0}function b(a,b,c){return b==null||b<=c||a==="cubestrip"?!1:!0}f.shouldResize360=a;f.shouldRecompress360=b}),66);
__d("curry",["bind"],(function(a,b,c,d,e,f,g){a=c("bind")(null,c("bind"),null);b=a;g["default"]=b}),98);
__d("loadImageFromBlob",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){return new(g||(g=b("Promise")))(function(b,c){var d=new Image();d.onload=function(){URL.revokeObjectURL(d.src),b(d)};d.onerror=function(a){URL.revokeObjectURL(d.src),c(a)};d.src=URL.createObjectURL(a)})}f["default"]=a}),66);
__d("XComposerPhotoUploader",["AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","Promise","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","asyncToGeneratorRuntime","curry","emptyFunction","loadImageFromBlob","performanceNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=a.URL||a.webkitURL||{};e=function(){function a(a){this.$20={},this.$2=a.uploadData||{},this.$1=a.uploadEndpoint,this.$3=a.retryLimit,this.$4=a.concurrentLimit,this.$5=a.resizer,this.$6=a.onUploadEnqueued||c("emptyFunction"),this.$7=a.onUploadsEnqueued||c("emptyFunction"),this.$8=a.onResizeStart||c("emptyFunction"),this.$11=a.onResizeProgress||c("emptyFunction"),this.$9=a.onResizeSuccess||c("emptyFunction"),this.$10=a.onResizeFailure||c("emptyFunction"),this.$12=a.onSphericalCheckFailure||c("emptyFunction"),this.$13=a.onSphericalCheckSuccess||c("emptyFunction"),this.$14=a.onUploadIsSpherical||c("emptyFunction"),this.$15=a.onUploadSent||c("emptyFunction"),this.$16=a.onUploadStart||c("emptyFunction"),this.$17=a.onUploadProgress||c("emptyFunction"),this.$18=a.onUploadSuccess||c("emptyFunction"),this.$19=a.onUploadFailure||c("emptyFunction")}var e=a.prototype;e.setUploadEndpoint=function(a){this.$1=a};e.setOption=function(a,b){this.$20[a]=b;return this};e.getUploadData=function(){return this.$2};e.setUploadData=function(a){this.$2=a};e.upload=function(a,b){var e=this;b||0;b=babelHelpers["extends"]({},this.$2);var f=null;if(!this.$21(a)){var g=d("PhotosUploadID").getNewID();a.uploadID=g;b.upload_id=g;this.$6({uploadID:g,fileName:a.value.split("/").pop().split("\\").pop(),fileURL:j.createObjectURL?j.createObjectURL(a):null})}else{f=Array.from(a.files);f=f.filter(function(a){return!d("ReactComposerMediaFilterUtils").hasVideos([a.name])});if(f.length===0)return;f.forEach(function(a){a.uploadID||(a.uploadID=d("PhotosUploadID").getNewID()),e.$6({uploadID:a.uploadID,fileName:a.name,isSpherical:!1,fileURL:j.createObjectURL?j.createObjectURL(a):null})})}this.$7();g=new(c("FileInputUploader"))(a).setURI(this.$1).setData(b).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);f&&f.length>0&&(g.setFiles({farr:f}),this.$5?g.setPreprocessHandler(this.$22.bind(this)):g.setPreprocessHandler(this.$23.bind(this)),this.$4&&g.setConcurrentLimit(this.$4));g.subscribe("progress",function(b,c){return e.$17(e.$24(c,a),c)});g.subscribe("failure",function(b,c){return e.$19(e.$24(c,a),c,f)});g.subscribe("start",function(b,c){return e.$16(e.$24(c,a),c)});g.subscribe("success",function(b,c){return e.$18(e.$24(c,a),c)});try{g.send(),this.$15(a)}catch(a){throw a}};e.uploadFiles=function(a){var b=this;a=Array.from(a);var c=[];a.forEach(function(a){var e=d("PhotosUploadID").getNewID();a.uploadID||(a.uploadID=e);b.$6({fileName:a.name,fileURL:j.createObjectURL?j.createObjectURL(a):null,isSpherical:!1,uploadID:e});c.push(e)});a=this.getAsyncFileUploadRequest(a,c);a.send()};e.getAsyncFileUploadRequest=function(a,b,c){var d=this;c=this.$25(a,c);c.subscribe("start",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$16(c,{upload:e})});c.subscribe("progress",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$17(c,{upload:e,event:e.getProgressEvent()})});c.subscribe("success",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);d.$18(c,{upload:e,response:e.getResponse()})});c.subscribe("failure",function(c,e){c=(c=d.$24({upload:e},{}))!=null?c:d.$26(a,b,e);return d.$19(c,{upload:e,response:e.getResponse()},a)});return c};e.getAsyncUploadRequest=function(a,b){var c=this;b=this.$25(a,b);b.subscribe("start",function(a,b){return c.$16(b.getFile().uploadID,{upload:b})});b.subscribe("progress",function(a,b){return c.$17(b.getFile().uploadID,{upload:b,event:b.getProgressEvent()})});b.subscribe("success",function(a,b){return c.$18(b.getFile().uploadID,{upload:b,response:b.getResponse()})});b.subscribe("failure",function(b,d){return c.$19(d.getFile().uploadID,{upload:d,response:d.getResponse()},a)});return b};e.$25=function(a,b){a=new(c("AsyncUploadRequest"))().setData(babelHelpers["extends"]({},b&&b.data,this.$2)).setFiles({farr:a}).setAllowCrossOrigin(!0).setURI(this.$1);(b==null?void 0:b.preventDefaultErrorHandler)&&a.setPreventDefaultErrorHandler(!0);this.$4&&a.setLimit(this.$4);this.$5?a.setPreprocessHandler(this.$22.bind(this)):a.setPreprocessHandler(this.$23.bind(this));for(b in this.$20)a.setOption(b,this.$20[b]);return a};e.$26=function(a,b,c){c=c.getFile();a=a.indexOf(c);return b[a]};e.$24=function(a,b){if(a.upload)return a.upload.getFile().uploadID;else return b.uploadID};e.$23=function(a,d){var e=this;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield e.$27(a,d)})())};e.$27=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.getFile();c=(yield this.$28(c));var d=a.getFile().uploadID;c&&c.isSpherical()?this.$14(c.isSpherical(),c,d):this.$14(!1,null,"");b(a)});function c(b,c){return a.apply(this,arguments)}return c}();e.$22=function(a,d){var e=this;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield e.$29(a,d)})())};e.$28=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(i||(i=c("performanceNow")))();try{var d=(yield c("SphericalImage").createFromBlob(a));this.$13(a,(i||(i=c("performanceNow")))()-b,d);return d}catch(d){this.$12(a,(i||(i=c("performanceNow")))()-b);return null}});function d(b){return a.apply(this,arguments)}return d}();e.$30=function(a){return this.$31(this.$5.resizeBlob.bind(this.$5),a)};e.$32=function(a,b){b===void 0&&(b=c("SphericalPhotoTypedConfig").upload_size_limit);return this.$31(this.$5.resize360Blob.bind(this.$5),a,b)};e.$33=function(a){return c("loadImageFromBlob")(a).then(function(a){return{width:a.width,height:a.height}})};e.$31=function(a,d,e){var f=this,g=c("curry")(this.$11,d.uploadID),i=c("curry")(this.$8,d),j=function(){return f.$33(d).then(i)};return new(h||(h=b("Promise")))(function(b,c){j(),a(d,function(a,d,e,f,g,h,i){a?c(a):e?b({originalWidth:f,originalHeight:g}):b({blob:d,originalWidth:f,originalHeight:g,outputWidth:h,outputHeight:i})},g,e)})};e.$29=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.getFile(),f=this.$5.isEligible(e==null?void 0:e.size,e==null?void 0:e.type);if(!e||!d("PhotosMimeType").isJpeg(e.type)||!f){this.$14(!1,null,"");e&&c("promiseDone")(this.$33(e).then(function(b){a.getAdditionalData().set("js_resized",!1).set("original_file_size",e.size).set("original_width",b==null?void 0:b.width).set("original_height",b==null?void 0:b.height).set("upload_width",b==null?void 0:b.width).set("upload_height",b==null?void 0:b.height)},c("emptyFunction")));b(a);return}f=(i||(i=c("performanceNow")))();var g,h;try{var j=null;j=(yield this.$28(e));if(j&&j.isSpherical()){this.$14(!0,j,e.uploadID);var k=j.getSize(),l=c("SphericalPhotoTypedConfig").upload_size_limit,m=j.getProjectionType(),n=!1;n=d("SphericalPhotoUploadHelper").shouldRecompress360(m,j.getBufferLength(),c("SphericalPhotoTypedConfig").upload_bytes_limit);j=d("SphericalPhotoUploadHelper").shouldResize360(m,k,l);k&&(j||n)&&(!j?g=(yield this.$32(e,Math.max(k.x,k.y)-1)):g=(yield this.$32(e)))}else this.$14(!1,null,""),g=(yield this.$30(e));g&&(g.blob!=null&&(h=g.blob,h.uploadID=e.uploadID,h.name=e.name,a.setFile(h)),a.getAdditionalData().set("js_resized",!0).set("original_file_size",e.size).set("original_width",g.originalWidth).set("original_height",g.originalHeight).set("upload_width",g.outputWidth).set("upload_height",g.outputHeight));m=h===null;a.getFile().filename=e.name;this.$9(e,h||e,m,(i||(i=c("performanceNow")))()-f,a.getAdditionalData().get("original_width"),a.getAdditionalData().get("original_height"),a.getAdditionalData().get("upload_width"),a.getAdditionalData().get("upload_height"))}catch(a){l=(i||(i=c("performanceNow")))()-f;this.$10(e,h||e,a,l)}b(a)});function e(b,c){return a.apply(this,arguments)}return e}();e.$21=function(a){return!!a.files&&c("AsyncUploadRequest").isSupported()};return a}();g["default"]=e}),98);
__d("MWPComposerMediaUploadUtil",["FBLogger","I64","LSIntEnum","MessagingAttachmentType","XComposerPhotoUploader","cometIsMimeTypeForMedia","emptyFunction","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,d,e,f,g,h,i,j,k,l){b===void 0&&(b=c("emptyFunction"));e===void 0&&(e=c("emptyFunction"));f===void 0&&(f=!1);var m="/ajax/mercury/upload.php";i===!0&&(m="/ajax/mercury/chatsupportuser/upload.php");e=new(c("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:e,onUploadProgress:b,onUploadStart:a,onUploadSuccess:function(a,b){b=b.response.payload.metadata;var e;if(b==null)c("FBLogger")("messenger_browser_clients").warn("Empty payload"),e={};else{b=b[0];b!=null?e=b:(c("FBLogger")("messenger_browser_clients").warn("Empty metadata isChatSupportUser: %s",i),e={})}b=e.fbid;var f=e.video_id,g=e.audio_id,h=e.gif_id;e=e.file_id;g=(b=(f=(b=(b=b)!=null?b:f)!=null?b:g)!=null?f:h)!=null?b:e;d(a,g);if(g==null)throw c("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:m});b={};b.data={chat_support_user_id:i===!0&&j!=null?j:void 0,nonce:i===!0&&l!=null?l:void 0,voice_clip:f?!0:void 0,voice_clip_waveform_data:f?JSON.stringify(k):void 0};e.getAsyncFileUploadRequest(g,h,b).send()}function b(a){a=a.type;if(d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE);else if(a==="audio/wav")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO);else if(a==="image/gif")return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE);else if(d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO);else return(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)}function e(a,b,e,f){return{action_url:void 0,attachment_fbid:a,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a,original_file_hash:void 0,playable_duration_ms:i.of_float(e*1e3),playable_url:URL.createObjectURL(b),playable_url_mime_type:b.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,sampling_frequency_hz:f==null?void 0:f.sampling_freq,source_text:void 0,subtitle_text:void 0,title_text:void 0,waveform_data:f==null?void 0:(a=f.amplitudes)==null?void 0:a.join(","),xma_layout_type:void 0,xmas_template_type:void 0}}function f(a,b){a=a.map(function(a){return{action_url:void 0,attachment_fbid:a.offlineAttachmentId,attachment_index:(i||(i=d("I64"))).zero,attachment_type:a.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:a.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:a.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a.previewUrl,playable_url_mime_type:a.mimeType,preview_height:a.previewHeight,preview_url:a.previewUrl,preview_url_mime_type:void 0,preview_width:a.previewWidth,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}});var e=[],f=[];a.forEach(function(a){(i||(i=d("I64"))).equal(a.attachment_type,(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))&&!b?f.push(a):e.push([a])});f.length>0&&e.unshift(f);return e.map(function(a){return a.map(function(a,b){return babelHelpers["extends"]({},a,{attachment_index:(i||(i=d("I64"))).of_int32(b)})})})}g.startUpload=a;g.getAttachmentType=b;g.getAudioAttachment=e;g.createPartitionedAttachments=f}),98);/*FB_PKG_DELIM*/
__d("LSGetLocalizedReplySnippet",["LSGetThreadParticipantDisplayName","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.seq([function(e){return c.i64.eq(a[1],d[0])?c.seq([function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2421884758]),f).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2676961947]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,3298086032]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.seq([function(e){return c.i64.eq(a[1],a[2])?c.seq([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,3873263038]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,2616853333]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}]):c.seq([function(e){return c.i64.eq(a[1],d[0])?c.seq([function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,4002265907]),f).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[4]),d[5]),c.localizeV2Async(c.i64.cast([0,2663996736]),d[5]).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[2]=d[3]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[1]).then(function(a){return a=a,d[3]=a[0],a})},function(e){return c.i64.eq(a[2],d[0])?c.seq([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(d[3]),d[5]),c.localizeV2Async(c.i64.cast([0,2868699317]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):c.seq([function(e){return c.i64.eq(a[1],a[2])?c.seq([function(a){return d[6]=c.createArray(),d[8]=(d[6].push(d[3]),d[6]),c.localizeV2Async(c.i64.cast([0,2688620547]),d[6]).then(function(a){return d[7]=a})},function(a){return d[5]=d[7]}]):c.seq([function(e){return c.sp(b("LSGetThreadParticipantDisplayName"),a[0],a[2]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[9]=(d[7].push(d[3]),d[7]),d[9]=(d[7].push(d[6]),d[7]),c.localizeV2Async(c.i64.cast([0,3544071775]),d[7]).then(function(a){return d[8]=a})},function(a){return d[5]=d[8]}])},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return d[1]=d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e;return c.seq([function(d){return c.seq([function(b){return c.fe(c.ftr(c.db.table(16).fetch([[[a[0],a[2],a[4]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[2]&&b.attachmentFbid===a[4]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(16).add({threadKey:a[0],messageId:a[2],attachmentFbid:a[4],timestampMs:a[1],offlineAttachmentId:a[3],attachmentType:a[5],filename:a[6],attributionAppId:a[7],hasMedia:a[8],isSharable:!1,hasXma:a[9],authorityLevel:c.i64.cast([0,20])})},function(d){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[0],a[2],a[1],e,!1,c.i64.eq(a[5],c.i64.cast([0,1])))}])},function(a){return c.resolve(d)}])}c=a;f["default"]=c}),66);
__d("LSSetMessageViewFlags",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[],e;return b.seq([function(d){return b.seq([function(d){return b.ftr(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[8]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,d.primarySortKey,d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey],c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[8]=f[8],f)})},function(d){return b.sb(b.ftr(b.db.table(12).fetch([[[a[0],{gt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.gt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.ge(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","ASC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=f[0],c[11]=f[1],c[12]=f[2],c[13]=f[3],c[14]=f[4],c[15]=f[5],c[16]=f[6],c[17]=f[7],c[18]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[10]=f[0],c[11]=f[1],c[12]=f[2],c[13]=f[3],c[14]=f[4],c[15]=f[5],c[16]=f[6],c[17]=f[7],c[18]=f[8],f)})},function(d){return b.sb(b.ftr(b.db.table(12).fetchDesc([[[a[0],{lt:c[7]}],[a[0],c[7]]],"messageDisplayOrder"]),function(d){return b.i64.eq(d.threadKey,a[0])&&d.messageId!==a[1]&&(b.i64.lt(d.primarySortKey,c[7])||b.i64.eq(d.primarySortKey,c[7])&&b.i64.le(d.secondarySortKey==null?b.i64.cast([-1,4294967295]):d.secondarySortKey,c[8]))}),[["timestampMs","DESC"]],["primarySortKey","secondarySortKey"]).next().then(function(a,d){var f=a.done;a=a.value;return f?(f=[b.i64.cast([0,0]),b.i64.cast([0,0]),b.i64.cast([0,0]),!1,"nonexistent",b.i64.cast([0,20]),e,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=f[0],c[21]=f[1],c[22]=f[2],c[23]=f[3],c[24]=f[4],c[25]=f[5],c[26]=f[6],c[27]=f[7],c[28]=f[8],f):(d=a.item,f=[d.timestampMs,d.senderId,d.viewFlags,d.isAdminMessage,d.messageId,d.authorityLevel,d.stickerId,b.i64.cast([-1,4294967295]),b.i64.cast([-1,4294967295])],c[20]=f[0],c[21]=f[1],c[22]=f[2],c[23]=f[3],c[24]=f[4],c[25]=f[5],c[26]=f[6],c[27]=f[7],c[28]=f[8],f)})},function(d){return c[32]=b.i64.or_(b.i64.cast([0,2]),b.i64.or_(!c[3]&&!a[3]?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.or_(c[3]?b.i64.cast([0,0]):b.i64.cast([0,1]),b.i64.or_(b.i64.eq(c[5],b.i64.cast([0,60]))||b.i64.eq(c[5],b.i64.cast([0,80]))?b.i64.cast([0,1048576]):b.i64.cast([0,0]),b.i64.neq(c[6],b.i64.cast([85970,924785702]))&&b.i64.neq(c[6],b.i64.cast([85970,1004785694]))&&b.i64.neq(c[6],b.i64.cast([85970,1044785690]))?b.i64.cast([0,0]):b.i64.cast([0,2097152]))))),c[14]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[12],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[13]&&!(b.i64.eq(c[11],c[1])&&!c[13]&&!c[3]&&!b.i64.gt(b.i64.sub(c[10],c[0]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[12],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[32],b.i64.cast([0,16])):c[32],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[10],c[14]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[10])&&d.messageId===c[14]}),function(a){var b=a.update;a.item;return b({viewFlags:c[35]})})},function(a){return c[30]=c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]}]):b.resolve(c[30]=c[32])},function(d){return c[24]!=="nonexistent"?b.seq([function(d){return c[35]=b.i64.or_(b.i64.and_(c[30],b.i64.cast([-1,4294967280])),b.i64.or_(b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,2]):b.i64.cast([0,0]),b.i64.or_(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5]))?b.i64.cast([0,8]):b.i64.cast([0,0]),b.i64.or_(!a[3]&&!c[3]&&!(b.i64.eq(c[1],c[21])&&!c[3]&&!c[23]&&!b.i64.gt(b.i64.sub(c[0],c[20]),b.i64.cast([0,6e5])))?b.i64.cast([0,4]):b.i64.cast([0,0]),b.i64.and_(c[30],b.i64.cast([0,1])))))),c[33]=b.i64.eq(b.i64.and_(c[35],b.i64.cast([0,8])),b.i64.cast([0,8])),c[34]=c[33]?b.i64.or_(c[22],b.i64.cast([0,16])):c[22],b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[20],c[24]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[20])&&d.messageId===c[24]}),function(a){var d=a.update;a.item;return d({viewFlags:c[33]?b.i64.and_(c[34],b.i64.cast([-1,4294967294])):c[34]})})},function(a){return c[31]=c[35]}]):b.resolve(c[31]=c[30])},function(d){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0],c[0],c[4]]]]),function(d){return b.i64.eq(d.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(d.timestampMs,c[0])&&d.messageId===c[4]}),function(a){var b=a.update;a.item;return b({viewFlags:c[31]})})}])},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSLocalApplyOptimisticMessage",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),f!==f?c.resolve(d[1]=f):c.seq([function(a){return c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[9]=a[0],a})},function(a){return d[1]=c.i64.to_string(d[9])}])},function(e){return d[8]=a[4]==null?a[3]:a[4],c.seq([function(a){return c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([-1,4294967295]):(b=a.item,d[9]=b.lastActivityTimestampMs)})},function(e){return d[11]=c.i64.add(d[9],c.i64.cast([0,1])),d[13]=c.i64.gt(d[0],d[11])?d[0]:d[11],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:"inbox",parentThreadKey:c.i64.cast([0,0]),lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[16],d[17],f,f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[13],lastReadWatermarkTimestampMs:d[13],snippet:d[8],snippetHasEmoji:a[5]==null?!1:a[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f,additionalThreadContext:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[33]=c.i64.of_float(Date.now()),d[9]=d[33]):(b=a.item,d[9]=b.primarySortKey)})},function(e){return a[8]!==f&&(c.i64.eq(a[9],c.i64.cast([0,1]))||c.i64.eq(a[10],c.i64.cast([0,1])))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(a[8]==null?"":a[8])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[a[8],f,f,c.i64.cast([0,0]),f,f,f,f,f,f,f,f,f,f,f,f],d[33]=i[0],d[34]=i[1],d[35]=i[2],d[36]=i[3],d[37]=i[4],d[38]=i[5],d[39]=i[6],d[40]=i[7],d[41]=i[8],d[42]=i[9],d[43]=i[10],d[44]=i[11],d[45]=i[12],d[46]=i[13],d[47]=i[14],d[48]=i[15],i):(h=e.item,c.seq([function(e){return d[54]=h.senderId,d[53]=h.stickerId,c.i64.neq(d[53],f)?(e=[d[53],c.i64.cast([0,4])],d[56]=e[0],d[57]=e[1],e):(e=[f,f],d[56]=e[0],d[57]=e[1],e),e=[d[56],d[57]],d[50]=e[0],d[51]=e[1],e,d[55]=h.replyType==null?c.i64.cast([0,0]):h.replyType,c.seq([function(e){return c.sp(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[54],d[55]).then(function(a){return a=a,d[56]=a[0],a})},function(b){return d[52]=c.i64.eq(a[10],c.i64.cast([0,1]))?d[56]:""}])},function(b){return b=[a[8],a[9],a[10],c.i64.cast([0,1]),d[52],d[54],h.text,d[50],d[51],f,f,f,f,f,f,d[55]],d[33]=b[0],d[34]=b[1],d[35]=b[2],d[36]=b[3],d[37]=b[4],d[38]=b[5],d[39]=b[6],d[40]=b[7],d[41]=b[8],d[42]=b[9],d[43]=b[10],d[44]=b[11],d[45]=b[12],d[46]=b[13],d[47]=b[14],d[48]=b[15],b}]))})},function(a){return a=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((a[8]===f||c.i64.eq(a[9],c.i64.cast([0,0]))||c.i64.eq(a[10],c.i64.cast([0,0]))?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e):(e=[a[8],a[9],a[10],c.i64.cast([0,1]),f,f,f,f,f,f,f,f,f,f,f,f],d[33]=e[0],d[34]=e[1],d[35]=e[2],d[36]=e[3],d[37]=e[4],d[38]=e[5],d[39]=e[6],d[40]=e[7],d[41]=e[8],d[42]=e[9],d[43]=e[10],d[44]=e[11],d[45]=e[12],d[46]=e[13],d[47]=e[14],d[48]=e[15],e),e=[d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44],d[45],d[46],d[47],d[48]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return a[13]?d[27]=!1:d[27]=!0,d[27]?(b=[f,f,f,f],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b):(d[33]=a[13].get("mention_offsets"),a[13],d[34]=a[13].get("mention_lengths"),a[13],d[35]=a[13].get("mention_ids"),a[13],d[36]=a[13].get("mention_types"),a[13],b=[d[33],d[34],d[35],d[36]],d[28]=b[0],d[29]=b[1],d[30]=b[2],d[31]=b[3],b),a[11]?d[32]=c.i64.cast([0,3]):d[32]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[9],secondarySortKey:d[0],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]}):c.seq([function(a){return c.db.table(12).fetch([[[d[1]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[9],d[0],f],d[33]=c[0],d[34]=c[1],d[35]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[33]=c[0],d[34]=c[1],d[35]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[1]]],"optimistic"]),function(a){return a.offlineThreadingId===d[1]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[1],timestampMs:d[0],offlineThreadingId:d[1],primarySortKey:d[33],secondarySortKey:d[34],text:a[3],senderId:a[0],stickerId:a[6],hotEmojiSize:a[7],isForwarded:a[11],forwardScore:a[12],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[35],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[32],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],replyType:d[26],mentionOffsets:d[28],mentionLengths:d[29],mentionIds:d[30],mentionTypes:d[31]})}])}])},function(e){return d[2]=c.createArray(),d[3]=(d[2].push("LSMailboxLocalApplyOptimisticMessageStoredProcedure"),d[2]),d[4]=(d[2].push("localApplyOptimisticMessage"),d[2]),d[5]=(d[2].push(a[1]),d[2]),d[6]=(d[2].push(d[1]),d[2]),d[7]=c.toJSON(d[2]),function(a){c.logger(a).info(a)}(d[7]),a[14]?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[1],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[1],d[0],a[3],!1,c.i64.neq(a[6],f))}]):c.resolve()},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSLocalApplyOptimisticMessageV2",["LSCreateOfflineThreadingID","LSGetLocalizedReplySnippet","LSIssueNewError","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return d[0]=c.i64.of_float(Date.now()),c.sp(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[4]=c.i64.to_string(d[1]),d[3]=a[4]==null?a[3]:a[4],c.seq([function(b){return d[5]=a[5].get("snippet_has_emoji"),a[5],c.islc(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[6]=c.i64.cast([-1,4294967295]):(b=a.item,d[6]=b.lastActivityTimestampMs)})},function(e){return d[8]=c.i64.add(d[6],c.i64.cast([0,1])),d[10]=c.i64.gt(d[0],d[8])?d[0]:d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return function(a){c.logger(a).info(a)}("localApplyOptimisticMessage insert optimistic thread"),c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=!1:(b=a.item,d[19]=b.capabilities2,c.i64.neq(d[19],f)?d[18]=d[19]:d[18]=c.i64.cast([0,0]),d[16]=c.i64.neq(c.i64.and_(d[18],c.i64.cast([0,4096])),c.i64.cast([0,0])))})},function(a){return d[11]=d[16]}]):c.resolve(d[11]=!1)},function(b){return d[11]?d[12]="e2ee_cutover":d[12]="inbox",d[11]?d[13]=c.i64.cast([-1,4294967279]):d[13]=c.i64.cast([0,0]),c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,40]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[1],mailboxType:c.i64.cast([0,0]),threadType:a[2],clientThreadKey:a[1],folderName:d[12],parentThreadKey:d[13],lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,40])})},function(b){return c.i64.eq(a[2],c.i64.cast([0,13]))||c.i64.eq(a[2],c.i64.cast([0,7]))||c.i64.eq(a[2],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.ftr(c.db.table(14).fetch([[[a[1],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(14).add({threadKey:a[1],contactId:a[1],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}]):c.resolve()},function(a){return c.sb(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=!1:(b=a.item,d[14]=b.errorShouldBeShown)})},function(a){return d[14]===!0?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),f).then(function(a){return d[16]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),f).then(function(a){return d[17]=a})},function(a){return c.sp(b("LSIssueNewError"),f,c.i64.cast([0,1545093]),d[16],d[17],f,f)}]):c.resolve()}]):(e.item,c.fe(c.ftr(c.db.table(9).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(b.threadType,a[2])}),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:d[10],lastReadWatermarkTimestampMs:d[10],snippet:d[3],snippetHasEmoji:d[5]==null?!1:d[5],snippetSenderContactId:a[0],snippetStringHash:f,snippetStringArgument1:f,snippetAttribution:f,snippetAttributionStringHash:f,additionalThreadContext:f})}))})}])},function(e){return c.seq([function(b){return c.islc(c.ftr(c.db.table(12).fetchDesc([[[a[1]]],"messageDisplayOrder"]),function(b){return c.i64.eq(b.threadKey,a[1])&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,40])))}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[51]=c.i64.of_float(Date.now()),d[5]=d[51]):(b=a.item,d[5]=b.primarySortKey)})},function(e){return d[7]=a[5].get("reply_source_id"),a[5],d[8]=a[5].get("reply_source_type"),a[5],d[9]=a[5].get("reply_source_type_v2"),a[5],d[10]=a[5].get("reply_type"),a[5],d[7]!==f&&(c.i64.eq(d[8],c.i64.cast([0,1]))||c.i64.eq(d[9],c.i64.cast([0,1])))?c.seq([function(e){return c.ftr(c.db.table(12).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===(d[7]==null?"":d[7])}).next().then(function(e,h){var i=e.done;e=e.value;return i?(i=[d[7],f,f,c.i64.cast([0,0]),f,f,f,f,f,f,f,f,f,f,f,f],d[51]=i[0],d[52]=i[1],d[53]=i[2],d[54]=i[3],d[55]=i[4],d[56]=i[5],d[57]=i[6],d[58]=i[7],d[59]=i[8],d[60]=i[9],d[61]=i[10],d[62]=i[11],d[63]=i[12],d[64]=i[13],d[65]=i[14],d[66]=i[15],i):(h=e.item,c.seq([function(e){return d[72]=h.senderId,d[71]=h.stickerId,c.i64.neq(d[71],f)?(e=[d[71],c.i64.cast([0,4])],d[73]=e[0],d[74]=e[1],e):(e=[f,f],d[73]=e[0],d[74]=e[1],e),e=[d[73],d[74]],d[68]=e[0],d[69]=e[1],e,c.seq([function(e){return c.sp(b("LSGetLocalizedReplySnippet"),a[1],a[0],d[72],d[10]==null?c.i64.cast([0,0]):d[10]).then(function(a){return a=a,d[73]=a[0],a})},function(a){return d[70]=c.i64.eq(d[9],c.i64.cast([0,1]))?d[73]:""}])},function(a){return a=[d[7],d[8],d[9],c.i64.cast([0,1]),d[70],d[72],h.text,d[68],d[69],f,f,f,f,f,f,d[10]],d[51]=a[0],d[52]=a[1],d[53]=a[2],d[54]=a[3],d[55]=a[4],d[56]=a[5],d[57]=a[6],d[58]=a[7],d[59]=a[8],d[60]=a[9],d[61]=a[10],d[62]=a[11],d[63]=a[12],d[64]=a[13],d[65]=a[14],d[66]=a[15],a}]))})},function(a){return a=[d[51],d[52],d[53],d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66]],d[11]=a[0],d[12]=a[1],d[13]=a[2],d[14]=a[3],d[15]=a[4],d[16]=a[5],d[17]=a[6],d[18]=a[7],d[19]=a[8],d[20]=a[9],d[21]=a[10],d[22]=a[11],d[23]=a[12],d[24]=a[13],d[25]=a[14],d[26]=a[15],a}]):c.resolve((d[7]===f||c.i64.eq(d[8],c.i64.cast([0,0]))||c.i64.eq(d[9],c.i64.cast([0,0]))?(e=[f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f],d[51]=e[0],d[52]=e[1],d[53]=e[2],d[54]=e[3],d[55]=e[4],d[56]=e[5],d[57]=e[6],d[58]=e[7],d[59]=e[8],d[60]=e[9],d[61]=e[10],d[62]=e[11],d[63]=e[12],d[64]=e[13],d[65]=e[14],d[66]=e[15],e):(e=[d[7],d[8],d[9],c.i64.cast([0,1]),f,f,f,f,f,f,f,f,f,f,f,f],d[51]=e[0],d[52]=e[1],d[53]=e[2],d[54]=e[3],d[55]=e[4],d[56]=e[5],d[57]=e[6],d[58]=e[7],d[59]=e[8],d[60]=e[9],d[61]=e[10],d[62]=e[11],d[63]=e[12],d[64]=e[13],d[65]=e[14],d[66]=e[15],e),e=[d[51],d[52],d[53],d[54],d[55],d[56],d[57],d[58],d[59],d[60],d[61],d[62],d[63],d[64],d[65],d[66]],d[11]=e[0],d[12]=e[1],d[13]=e[2],d[14]=e[3],d[15]=e[4],d[16]=e[5],d[17]=e[6],d[18]=e[7],d[19]=e[8],d[20]=e[9],d[21]=e[10],d[22]=e[11],d[23]=e[12],d[24]=e[13],d[25]=e[14],d[26]=e[15],e))},function(b){return d[27]=a[5].get("mention_data"),a[5],d[27]?d[28]=!1:d[28]=!0,d[28]?(b=[f,f,f,f],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b):(d[51]=d[27].get("mention_offsets"),d[27],d[52]=d[27].get("mention_lengths"),d[27],d[53]=d[27].get("mention_ids"),d[27],d[54]=d[27].get("mention_types"),d[27],b=[d[51],d[52],d[53],d[54]],d[29]=b[0],d[30]=b[1],d[31]=b[2],d[32]=b[3],b),d[33]=a[5].get("magic_words_data"),a[5],d[33]?d[34]=!1:d[34]=!0,d[34]?(b=[f,f],d[35]=b[0],d[36]=b[1],b):(d[51]=d[33].get("magic_word_offsets"),d[33],d[52]=d[33].get("magic_word_lengths"),d[33],b=[d[51],d[52]],d[35]=b[0],d[36]=b[1],b),d[50]=c.i64.eq(d[10],c.i64.cast([0,1]))?d[17]:a[3],d[37]=a[5].get("sticker_id"),a[5],d[38]=a[5].get("sticker_alt_text"),a[5],d[39]=a[5].get("hot_emoji_size"),a[5],d[40]=a[5].get("iout"),a[5],d[41]=a[5].get("platform_XMD_encoded"),a[5],d[42]=a[5].get("is_forwarded"),a[5],d[43]=a[5].get("forward_score"),a[5],d[44]=a[5].get("power_up_style"),a[5],d[45]=a[5].get("local_data_id"),a[5],d[46]=a[5].get("command_type"),a[5],d[47]=a[5].get("reply_type"),a[5],d[48]=a[5].get("is_forwarded"),a[5],d[48]?d[49]=c.i64.cast([0,3]):d[49]=d[13],c.i64.eq(c.i64.cast([0,20]),c.i64.cast([0,20]))?c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[5],secondarySortKey:d[0],text:d[50],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[45],replyType:d[26],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[49],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]}):c.seq([function(a){return c.db.table(12).fetch([[[d[4]]],"optimistic"]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[d[5],d[0],d[45]],d[51]=c[0],d[52]=c[1],d[53]=c[2],c):(b=a.item,c=[b.primarySortKey,b.secondarySortKey,b.localDataId],d[51]=c[0],d[52]=c[1],d[53]=c[2],c)})},function(a){return c.fe(c.ftr(c.db.table(12).fetch([[[d[4]]],"optimistic"]),function(a){return a.offlineThreadingId===d[4]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(12).add({threadKey:a[1],messageId:d[4],timestampMs:d[0],offlineThreadingId:d[4],primarySortKey:d[51],secondarySortKey:d[52],text:d[50],senderId:a[0],stickerId:d[37],hotEmojiSize:d[39],isForwarded:d[42],forwardScore:d[43],isAdminMessage:!1,sendStatus:c.i64.cast([0,1]),sendStatusV2:c.i64.cast([0,1]),authorityLevel:c.i64.cast([0,20]),localDataId:d[53],replyType:d[26],replySourceId:d[11],replySourceType:d[12],replySourceTypeV2:d[49],replyStatus:d[14],replySnippet:d[15],replyToUserId:d[16],replyMessageText:d[17],replyAttachmentId:d[18],replyAttachmentType:d[19],replyMediaUrl:d[20],replyMediaUrlFallback:d[21],replyMediaPreviewWidth:d[22],replyMediaPreviewHeight:d[23],replyMediaUrlMimeType:d[24],mentionOffsets:d[29],mentionLengths:d[30],mentionIds:d[31],mentionTypes:d[32]})}])}])},function(e){return d[5]=c.createArray(),d[6]=(d[5].push("LSMailboxLocalApplyOptimisticMessageV2StoredProcedure"),d[5]),d[7]=(d[5].push("localApplyOptimisticMessage"),d[5]),d[8]=(d[5].push(a[1]),d[5]),d[9]=(d[5].push(d[4]),d[5]),d[10]=c.toJSON(d[5]),function(a){c.logger(a).info(a)}(d[10]),d[2]=a[5].get("calculate_denormalizations"),a[5],(d[2]==null?!0:d[2])?c.seq([function(e){return c.sp(b("LSSetMessageViewFlags"),a[1],d[4],d[0],c.i64.eq(a[2],c.i64.cast([0,1])))},function(e){return d[5]=a[5].get("sticker_id"),a[5],c.sp(b("LSSetMessageDisplayedContentTypes"),a[1],d[4],d[0],a[3],!1,c.i64.neq(d[5],f))}]):c.resolve()},function(a){return a=[d[4],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return c.sp(b("LSMarkThreadRead"),a[1],a[0])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],f)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_id",a[0]),d[2].set("last_read_watermark_ts",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_id"),d[2],d[4]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,21]),d[4],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddon","LSFactory","Promise","killswitch"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e,f,g,i,j){return c("killswitch")("MESSENGER_WEB_DATA_TRACE_ID")?(h||(h=b("Promise"))).resolve():c("LSAppendDataTraceAddon")(e,f,g,(d=i)!=null?d:"",(e=j)!=null?e:"",c("LSFactory")(a))};g["default"]=a}),98);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d;return b.seq([function(c){return b.fe(b.ftr(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(c){return c.attachmentFbid===a[2]&&b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,20]))}),function(b){var c=b.update;b.item;return c({playableUrl:a[3],playableUrlFallback:a[4],playableUrlExpirationTimestampMs:a[5],playableUrlMimeType:a[6],previewUrl:a[7],previewUrlFallback:a[8],previewUrlExpirationTimestampMs:a[9],previewUrlMimeType:a[10],previewWidth:a[11],previewHeight:a[12],imageUrl:d,imageUrlFallback:d,imageUrlExpirationTimestampMs:d,imageUrlMimeType:d})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSOptimisticSendMessageV2",["LSAppendDataTraceAddon.nop","LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessageV2","LSLogEventAnnotate.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return c.sp(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[4],a[5],a[6]).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return c.seq([function(e){return d[4]=a[6].get("external_attachment_url"),a[6],d[29]=d[4]===""?f:d[4],d[29]!==f?c.seq([function(e){return d[30]=a[6].get("attribution_app_id"),a[6],d[31]=a[6].get("optimistic_attachment_preview"),a[6],c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],d[0],d[0],c.i64.cast([0,3]),d[29],d[30],!0,!1)},function(e){return d[31]?d[32]=!1:d[32]=!0,d[32]?c.resolve():(d[33]=d[31].get("playable_url"),d[31],d[34]=d[31].get("playable_url_fallback"),d[31],d[35]=d[31].get("playable_url_expiration_timestamp_ms"),d[31],d[36]=d[31].get("playable_url_mime_type"),d[31],d[37]=d[31].get("preview_url"),d[31],d[38]=d[31].get("preview_url_fallback"),d[31],d[39]=d[31].get("preview_url_expiration_timestamp_ms"),d[31],d[40]=d[31].get("preview_url_mime_type"),d[31],d[41]=d[31].get("preview_width"),d[31],d[42]=d[31].get("preview_height"),d[31],d[43]=d[31].get("image_url"),d[31],d[44]=d[31].get("image_url_fallback"),d[31],d[45]=d[31].get("image_url_expiration_timestamp_ms"),d[31],d[46]=d[31].get("image_url_mime_type"),d[31],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[0],d[33],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42]))},function(a){return d[5]=c.i64.cast([0,7])}]):c.seq([function(e){return d[30]=a[6].get("sticker_id"),a[6],c.i64.neq(d[30],f)?c.seq([function(e){return c.i64.neq(d[30],c.i64.cast([53057,267535043]))&&c.i64.neq(d[30],c.i64.cast([85970,924785702]))&&c.i64.neq(d[30],c.i64.cast([85970,1004785694]))&&c.i64.neq(d[30],c.i64.cast([85970,1044785690]))?c.seq([function(e){return d[34]=c.i64.to_string(d[30]),d[32]=a[6].get("optimistic_attachment_preview"),a[6],c.sp(b("LSInsertOptimisticAttachment"),a[1],d[1],d[0],c.i64.to_string(d[30]),d[34],c.i64.cast([0,1]),f,f,!0,!1)},function(e){return d[32]?d[33]=!1:d[33]=!0,d[33]?c.resolve():(d[35]=d[32].get("playable_url"),d[32],d[36]=d[32].get("playable_url_fallback"),d[32],d[37]=d[32].get("playable_url_expiration_timestamp_ms"),d[32],d[38]=d[32].get("playable_url_mime_type"),d[32],d[39]=d[32].get("preview_url"),d[32],d[40]=d[32].get("preview_url_fallback"),d[32],d[41]=d[32].get("preview_url_expiration_timestamp_ms"),d[32],d[42]=d[32].get("preview_url_mime_type"),d[32],d[43]=d[32].get("preview_width"),d[32],d[44]=d[32].get("preview_height"),d[32],d[45]=d[32].get("image_url"),d[32],d[46]=d[32].get("image_url_fallback"),d[32],d[47]=d[32].get("image_url_expiration_timestamp_ms"),d[32],d[48]=d[32].get("image_url_mime_type"),d[32],c.sp(b("LSUpdateOptimisticAttachmentPreview"),a[1],d[0],d[34],d[35],d[36],d[37],d[38],d[39],d[40],d[41],d[42],d[43],d[44]))}]):c.resolve()},function(a){return d[31]=c.i64.cast([0,2])}]):c.resolve(d[31]=c.i64.cast([0,1]))},function(a){return d[5]=d[31]}])},function(e){return c.sp(b("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),c.i64.to_string(a[1]),c.i64.cast([0,46]),"",f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),f,c.i64.cast([0,0]),f,c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(e){return d[7]=a[6].get("data_trace_id"),a[6],d[7]!==f?c.seq([function(a){return c.sp(b("LSPredefineTraceForTask"),d[7],d[6],c.i64.to_string(c.i64.cast([0,46])),d[0])},function(e){return d[30]=a[6].get("source"),a[6],d[33]=c.i64.to_string(d[30]),d[33]!==f?d[31]=d[33]:d[31]=c.i64.to_string(c.i64.cast([0,0])),d[32]=",",c.nop(b("LSAppendDataTraceAddon.nop"),d[7],c.i64.cast([0,20]),c.i64.cast([0,1]),f,[d[31],d[32],c.i64.to_string(d[5]),d[32],c.i64.to_string(a[2])].join(""))}]):c.resolve()},function(b){return d[8]=a[6].get("source"),a[6],d[9]=a[6].get("external_attachment_url"),a[6],d[10]=a[6].get("platform_ref"),a[6],d[11]=a[6].get("platform_token"),a[6],d[12]=a[6].get("reply_source_id"),a[6],d[13]=a[6].get("reply_source_type"),a[6],d[14]=a[6].get("mark_read"),a[6],d[15]=a[6].get("initiating_app_id"),a[6],d[16]=a[6].get("initiating_source"),a[6],d[17]=a[6].get("navigation_chain"),a[6],d[18]=a[6].get("dety_params"),a[6],d[19]=a[6].get("skip_url_preview_gen"),a[6],d[20]=a[6].get("text_has_links"),a[6],d[21]=a[6].get("multitab_env"),a[6],c.db.table(31).add({taskId:d[6],threadKey:a[1],offlineThreadingId:d[0],threadAttributionSource:d[8],externalAttachmentUrl:d[9],platformRef:d[10],platformToken:d[11],replySourceId:d[12],replySourceType:d[13],sendType:d[5],markThreadRead:d[14]==null?!1:d[14],initiatingSource:d[16],skipUrlPreviewGen:d[19],textHasLinks:d[20],multitabEnv:d[21]})},function(e){return d[22]=a[6].get("mark_read"),a[6],(d[22]==null?!1:d[22])?c.sp(b("LSOptimisticMarkThreadReadV2"),a[1],d[1]):c.resolve()},function(e){return d[23]=c.createArray(),d[24]=(d[23].push("optimisticSendMessageV2"),d[23]),d[25]=(d[23].push(a[1]),d[23]),d[26]=(d[23].push(d[0]),d[23]),d[27]=c.toJSON(d[23]),function(a){c.logger(a).info(a)}(d[27]),d[28]=new c.Map(),d[28].set("offline_threading_id",d[0]),d[28].set("task_id",d[6]),d[28].set("task_queue_name",c.i64.to_string(a[1])),d[28].set("task_label",c.i64.to_string(c.i64.cast([0,46]))),c.nop(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,23]),c.i64.cast([0,0]),d[28])},function(a){return a=[d[0],d[6]],d[2]=a[0],d[3]=a[1],a}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("CometMessengerState",["Promise","asyncToGeneratorRuntime","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(yield (b=window.navigator)==null?void 0:(b=b.locks)==null?void 0:b.query==null?void 0:b.query());b=b==null?void 0:b.pending.filter(function(b){return b.name.indexOf(a)===0}).map(function(a){return a.name});return b});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(yield (b=window.navigator)==null?void 0:(b=b.locks)==null?void 0:b.query==null?void 0:b.query());b=b==null?void 0:b.held.filter(function(b){return b.name.indexOf(a)===0}).map(function(a){return a.name});return b});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=(yield (a=window.navigator)==null?void 0:(a=a.locks)==null?void 0:a.query==null?void 0:a.query()))!=null?a:{};return JSON.stringify(a)});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=c("ifRequired")("ReStoreNameUtils",function(a){return a}))!=null?a:null;if(!a)return null;var d=a.lsPlatformLockName;a=a.reStoreCMLockName;return(h||(h=b("Promise"))).all([i(a),yield k(d),yield m()])});return p.apply(this,arguments)}function a(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield o());if(a==null)return null;var b=a[0];a=a[1];if(b.length>0)return"Restore Lock Pending";return a.length<1?"LS Platform Lock Not Held":null});return q.apply(this,arguments)}function d(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield o());if(a==null)return;var b=a[0],c=a[1];a=a[2];b=(b.length>0?"\u274c ":"")+b.length;c=(c.length<1?"\u274c ":"")+c.length;return{lsPlatformLockHeld:c,rawLocksState:a,restoreLockPending:b}});return r.apply(this,arguments)}g.lockError=a;g.dump=d}),98);
__d("IGDBroadcastChannelLoggerDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("IGDBroadcastChannelLogger").__setRef("IGDBroadcastChannelLoggerDeferred");function a(a){h.onReady(function(b){return b.log(a)})}g.log=a}),98);
__d("useIGDBroadcastChannelLogger",["I64","IGDBroadcastChannelLoggerDeferred","Int64Hooks","ReQL","ReQLSuspense","asyncToGeneratorRuntime","usePolarisViewer","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=(i||(i=c("useReStore")))(),f=c("usePolarisViewer")(),g=(h||(h=d("I64"))).of_string((f=f==null?void 0:f.id)!=null?f:"0"),k=j(a);f=d("Int64Hooks").useCallbackInt64(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=a!=null?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.table("threads")).getKeyRange(a).map(function(a){return a.consistentThreadFbid})):null;d("IGDBroadcastChannelLoggerDeferred").log(babelHelpers["extends"]({},b,{actor_id:(h||(h=d("I64"))).to_string(g),consistent_thread_fbid:c!=null?(h||(h=d("I64"))).to_string(c):void 0,ig_thread_id:(b=k)!=null?b:void 0}))});return function(a){return c.apply(this,arguments)}}(),[g,e,k,a]);return f}function j(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(b.table("ig_thread_info")).getKeyRange(a)},[b,a],f.id+":63");return(e=e==null?void 0:e.igThreadId)!=null?e:""}g["default"]=a}),98);
__d("IGDBroadcastChannelLoggingShapes",[],(function(a,b,c,d,e,f){"use strict";a={action:"tap",event:"message_options_rendered",parent_surface:"broadcast",source:"message_options_dot_menu",surface:"thread_view"};b={action:"tap",event:"end_chat_dialog_rendered",parent_surface:"broadcast",source:"end_chat_cta_button",surface:"thread_details"};c={action:"tap",event:"thread_end_successful",parent_surface:"broadcast",source:"end_chat",surface:"thread_details"};d={action:"tap",event:"thread_end_attempt",parent_surface:"broadcast",source:"end_chat_dialog",surface:"thread_details"};e={action:"tap",event:"thread_end_error",parent_surface:"broadcast",source:"end_chat",surface:"thread_details"};var g={action:"tap",event:"thread_end_cancel",parent_surface:"broadcast",source:"end_chat_dialog",surface:"thread_details"},h={action:"view",event:"retrieve_polls_responses_details",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},i={action:"view",event:"poll_responses_render_error",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},j={action:"view",event:"poll_responses_render_successful",parent_surface:"instagram",source:"poll_responses",surface:"thread_view"},k={action:"tap",event:"retrieve_message_reactions_details",parent_surface:"instagram",source:"view_reactions_button",surface:"thread_view"},l={action:"view",event:"message_reactions_render_error",parent_surface:"instagram",source:"message_reactions",surface:"thread_view"},m={action:"view",event:"message_reactions_render_successful",parent_surface:"instagram",source:"message_reactions",surface:"thread_view"},n={action:"view",event:"fetch_seen_active_count_error",parent_surface:"instagram",source:"view_seen_active_count",surface:"thread_view"},o={action:"view",event:"fetch_seen_active_count_successful",parent_surface:"instagram",source:"view_seen_active_count",surface:"thread_view"},p={action:"tap",event:"thread_create_attempt",parent_surface:"broadcast",source:"create_broadcast_chat_button",surface:"chat_setup"},q={action:"view",event:"thread_create_successful",parent_surface:"broadcast",source:"create_broadcast_chat",surface:"thread_view"},r={action:"view",event:"thread_create_error",parent_surface:"broadcast",source:"create_broadcast_chat",surface:"chat_setup"},s={action:"view",event:"broadcast_chat_option_viewed",parent_surface:"broadcast",source:"omnipicker_view",surface:"dm_creation_omnipicker"},t={action:"tap",event:"creator_nux_sheet_rendered",parent_surface:"broadcast",source:"create_broadcast_chat_item",surface:"dm_creation_omnipicker"},u={action:"tap",event:"chat_setup_sheet_rendered",parent_surface:"broadcast",source:"create_broadcast_chat_item",surface:"dm_creation_omnipicker"},v={action:"tap",event:"chat_setup_sheet_rendered",parent_surface:"broadcast",source:"get_started_button",surface:"broadcast_chat_creator_nux"},w={action:"impression",event:"exit_chat_setup_sheet",parent_surface:"broadcast",source:"back_button",surface:"chat_setup"};f.MESSAGE_OPTIONS_RENDERED_SHAPE=a;f.END_CHAT_DIALOG_RENDERED_SHAPE=b;f.THREAD_END_SUCCESSFUL_SHAPE=c;f.THREAD_END_ATTEMPT_SHAPE=d;f.THREAD_END_ERROR_SHAPE=e;f.THREAD_END_CANCEL_SHAPE=g;f.POLL_DETAIL_DIALOG_RENDERED_SHAPE=h;f.POLL_DETAIL_DIALOG_RESPONSE_FETCH_FAILED_SHAPE=i;f.POLL_DETAIL_DIALOG_RESPONSE_FETCH_SUCCESSFUL_SHAPE=j;f.REACTIONS_FOOTER_BUTTON_CLICK_SHAPE=k;f.REACTIONS_DIALOG_RESPONSE_FETCH_FAILED_SHAPE=l;f.REACTIONS_DIALOG_RESPONSE_FETCH_SUCCESSFUL_SHAPE=m;f.SEEN_COUNT_RESPONSE_FETCH_FAILED_SHAPE=n;f.SEEN_COUNT_RESPONSE_FETCH_SUCCESSFUL_SHAPE=o;f.CREATE_BROADCAST_CHANNEL_ATTEMPT_SHAPE=p;f.CREATE_BROADCAST_CHANNEL_SUCCESS_SHAPE=q;f.BROADCAST_CHANNEL_SUCCESS_FAILURE_SHAPE=r;f.BROADCAST_CHAT_OPTION_VIEWED_SHAPE=s;f.CREATOR_NUX_SHEET_RENDERED_SHAPE=t;f.CHAT_SETUP_SHEET_RENDERED_SHAPE=u;f.CHAT_SETUP_SHEET_RENDERED_FROM_NUX_SHAPE=v;f.EXIT_CHAT_SETUP_SHEET_SHAPE=w}),66);
__d("useLSMessagingInitiatingSource",["LSIntEnum","LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX);else if(a==="FullscreenChat")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN);else if(a==="ChatTab")return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT);else return(h||(h=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT)}g["default"]=a}),98);
__d("sendToSentQPLLogger",["QPLUserFlow","Random","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(25313175,"1551");function a(a,b){c("QPLUserFlow").addAnnotations(h,b,{instanceKey:a})}function b(a,b){c("QPLUserFlow").endFailure(h,b.name,{error:b,instanceKey:a})}function e(a,b,d){c("QPLUserFlow").addPoint(h,b,{debugInfo:d,instanceKey:a})}function f(){var a=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(h,{instanceKey:a});return a}function i(a){c("QPLUserFlow").endSuccess(h,{instanceKey:a})}g.addSendToSentAnnotations=a;g.markSendToSentFail=b;g.markSendToSentPoint=e;g.markSendToSentStart=f;g.markSendToSentSuccess=i}),98);
__d("MWChatMessageId",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){if(a.type==="sent")return a.value.messageId}function b(a){if(a.type==="sent")return a.value.threadId}function c(a){if(a.type==="sent")return a.value.timestamp}function e(a,b,c){return{type:"sent",value:{messageId:b,threadId:(h||(h=d("I64"))).of_string(a),timestamp:h.of_string(c)}}}function f(a){return{type:"sent",value:{messageId:a,threadId:(h||(h=d("I64"))).zero,timestamp:h.zero}}}var i={type:"sent",value:{messageId:"",threadId:(h||(h=d("I64"))).zero,timestamp:h.zero}};g.getMessageId=a;g.getThreadId=b;g.getTimestamp=c;g.makeSent=e;g.emptyForExamplesWithId=f;g.emptyForExamples=i}),98);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","LSMessagingInitiatingSource","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWChatInteraction").get((h||(h=d("I64"))).to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;return b!=null&&(h||(h=d("I64"))).to_int32(b)===c("LSMessagingInitiatingSource").FACEBOOK_INBOX?i(e,a):j(e,a)}function i(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.inboxEntrypoint;if(a!=null)return a;a=d("MWChatInteraction").get("inbox_init");return a!=null&&(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).of_string(a))?"initInbox":"unknownInbox"}function j(a,b){a=a==null?void 0:(a=a.annotations.string)==null?void 0:a.entrypoint;if(a!=null)return a;a=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);a=a!=null?c("InteractionTracingMetrics").get(a):null;a=(a==null?void 0:(a=a.annotations.string)==null?void 0:a.thread_id)===(h||(h=d("I64"))).to_string(b);return a?"auto_open":"unknown"}g["default"]=a}),98);
__d("MWLinkRegex",[],(function(a,b,c,d,e,f){"use strict";function a(){var a="(?:(?:[a-z]+:)?//)?",b="(?:\\S+(?::\\S*)?@)?",c="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",d="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",e="(?:\\.(?:((?:[a-z\\u00a1-\\uffff]{2,}))))\\.?",f="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?';a="(?:"+a+"|www\\.)"+b+"(?:localhost|"+c+d+e+")"+f+g;return new RegExp(a,"ig")}function b(){var a="(^|)[^@\\s]+@[^@]+[.][^@\\s]+(?!\\S)";return new RegExp(a,"ig")}f.getLinkRegex=a;f.getEmailRegex=b}),66);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasSticker;h=h===void 0?!1:h;var i=a.hasVideo;i=i===void 0?!1:i;a=a.hasVoiceClip;a=a===void 0?!1:a;var j=g.None;e?j=g.Image:i?j=g.Video:h?j=g.Sticker:c?j=g.Gif:a?j=g.Audio:d?j=g.HotEmoji:f?j=g.Link:b&&(j=g.File);return j}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWSharedMsgLogUtils",["$InternalEnum","CometMessengerState","I64","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWLinkRegex","MWMsgMediaTypeLogUtils","MWVersion","MultipleTabsLogger","URLMatcher","asyncToGeneratorRuntime","cr:6277","gkx","isStringNullOrEmpty","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({Send:"send",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply"}),j=b("$InternalEnum")({Text:"text",NonText:"non-text"});function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){e.hasAttachment;var g=e.hasReply,k=e.hasStoryReply,l=e.hasText;e=babelHelpers.objectWithoutPropertiesLoose(e,["hasAttachment","hasReply","hasStoryReply","hasText"]);var m=i.Send;g?m=i.Reply:k&&(m=i.StoryReply);g=d("MWMsgMediaTypeLogUtils").getAttachmentType(e);k=l&&(!g||g===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?j.Text:j.NonText;e=!1;b("cr:6277")!=null&&(e=(yield b("cr:6277").isCutoverThreadKey(a.threadKey)));return{bool:{is_community_event:a.eventStartTimestampMs!=null,is_cutover:e,is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_pdb_enabled:Boolean(c("gkx")("6543")),is_secure:d("LSMessagingThreadTypeUtil").isSecure(a.threadType),is_tlc_public_user:c("gkx")("955"),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},string:{action_type:m,attachment_type:g,hasMultipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),lockError:yield d("CometMessengerState").lockError(),message_type:k,mw_version:(h||(h=d("I64"))).to_string(d("MWVersion").v2),original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey,f),thread_id:h.to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?(h||(h=d("I64"))).to_string(a.threadSubtype):null,thread_type:h.to_string(a.threadType)}}});return k.apply(this,arguments)}function e(a,e,f,g){var k=e.hasFile;k=k===void 0?!1:k;var l=e.hasGif;l=l===void 0?!1:l;var m=e.hasHotEmoji;m=m===void 0?!1:m;var n=e.hasImage;n=n===void 0?!1:n;var o=e.hasLinks;o=o===void 0?!1:o;var p=e.hasReply;p=p===void 0?!1:p;var q=e.hasSticker;q=q===void 0?!1:q;var r=e.hasStoryReply;r=r===void 0?!1:r;var s=e.hasText;s=s===void 0?!1:s;var t=e.hasVideo;t=t===void 0?!1:t;e=e.hasVoiceClip;e=e===void 0?!1:e;var u=i.Send;p?u=i.Reply:r&&(u=i.StoryReply);p=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:k,hasGif:l,hasHotEmoji:m,hasImage:n,hasLinks:o,hasSticker:q,hasVideo:t,hasVoiceClip:e});r=s&&(!p||p===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?j.Text:j.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",p);a.addAnnotation("action_type",u);a.addAnnotation("message_type",r);a.addAnnotation("original_entrypoint",c("MWGetOriginalEntrypoint")(f.threadKey,g));a.addAnnotation("thread_id",(h||(h=d("I64"))).to_string(f.threadKey));a.addAnnotation("thread_type",h.to_string(f.threadType));f.threadSubtype!=null&&a.addAnnotation("thread_subtype",(h||(h=d("I64"))).to_string(f.threadSubtype));b("cr:6277")!=null&&c("promiseDone")(b("cr:6277").isCutoverThreadKey(f.threadKey),function(b){a.addAnnotationBoolean("is_cutover",b)});a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isSecure(f.threadType));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb_enabled",Boolean(c("gkx")("6543")))}function f(a,b,e,f,g,h,i){var j=!c("isStringNullOrEmpty")(a),k=!1;a!=null&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getLinkRegex()).length>0&&c("URLMatcher").multiMatchToPattern(a,d("MWLinkRegex").getEmailRegex()).length===0&&(k=!0);a=!1;h=h!=null;h?a=!0:g!=null&&(a=!0);var l=!1,m=!1,n=!1;if(i!=null&&i.length>0){a=!0;for(i of i){var o=i.mimeType;o.indexOf("image")!==-1&&(l=!0);o.indexOf("video")!==-1&&(m=!0);o.indexOf("application")!==-1&&(n=!0)}}o=b!=null;i=e!=null;b=e!=null;e=f!=null;f=!e&&g!=null;return{hasAttachment:a,hasFile:n,hasGif:f,hasHotEmoji:o,hasImage:l,hasLinks:k,hasReply:i,hasSticker:e,hasStoryReply:b,hasText:j,hasVideo:m,hasVoiceClip:h}}g.ActionType=i;g.MsgType=j;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.getMessageTypeParams=f}),98);
__d("IGDSEmoji.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.emoji;a=a.fontSize;return i.jsx("span",{className:"x15yrdiy",style:a!=null?{fontSize:a}:void 0,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("Clipboard",["Promise","UserAgent"],(function(a,b,c,d,e,f,g){var h;function a(){return window.document&&window.document.queryCommandSupported instanceof Function&&window.document.queryCommandSupported("copy")&&!(c("UserAgent").isBrowser("Firefox < 41")||c("UserAgent").isPlatform("iOS < 10.3"))||c("UserAgent").isBrowser("Chrome >= 43")}function i(a,b){b=b||document.body;if(!b)return!1;var d=document.activeElement,e=!0,f=document.createElement("textarea");b.appendChild(f);f.value=a;if(c("UserAgent").isPlatform("iOS >= 10.3")){a=document.createRange();a.selectNodeContents(f);var g=window.getSelection();g.removeAllRanges();g.addRange(a);f.setSelectionRange(0,999999)}else f.select();try{e=document.execCommand("copy")}catch(a){e=!1}b.removeChild(f);d!=null&&d.focus();return e}function d(a){var c=window.navigator;if(c&&c.clipboard&&typeof c.clipboard.writeText==="function")return c.clipboard.writeText(a);return i(a)?(h||(h=b("Promise"))).resolve():(h||(h=b("Promise"))).reject()}g.isSupported=a;g.copy=i;g.copyAsync=d}),98);
__d("LSMessageReplySourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,LIGHTWEIGHT_STATUS:6,LIGHTWEIGHT_STATUS_REACTION:7,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16});f["default"]=a}),66);
__d("MessagePowerUp",[],(function(a,b,c,d,e,f){a=Object.freeze({AVATAR_LOVE:1e3,AVATAR_ANGER:1001,AVATAR_LAUGH:1002,AVATAR_CRY:1003,NONE:0,LOVE:1,GIFT_WRAP:2,CELEBRATION:3,FIRE:4});f["default"]=a}),66);
__d("LSMediaUrl.bs",["I64","LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.previewUrlFallback):a.previewUrlLarge}function e(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.playableUrlFallback):a.playableUrl}function f(a){var b=a.imageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.imageUrlFallback):a.imageUrl}function i(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.faviconUrlFallback):a.faviconUrl}function j(a){try{var b=a.listItemContactUrlExpirationTimestampList1;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList1):a.listItemContactUrlList1}catch(b){return a.listItemContactUrlList1}}function k(a){try{var b=a.listItemContactUrlExpirationTimestampList2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList2):a.listItemContactUrlList2}catch(b){return a.listItemContactUrlList2}}function l(a){try{var b=a.listItemContactUrlExpirationTimestampList3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemContactUrlFallbackList3):a.listItemContactUrlList3}catch(b){return a.listItemContactUrlList3}}function m(a){var b=a.headerImageUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.headerImageUrlFallback):a.headerImageUrl}function n(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp1;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b)))return c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback1);else return a.listItemProfilePictureUrl1}catch(b){return a.listItemProfilePictureUrl1}}function o(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp2;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback2):a.listItemProfilePictureUrl2}catch(b){return a.listItemProfilePictureUrl2}}function p(a){try{var b=a.listItemProfilePictureUrlExpirationTimestamp3;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(b))?c("rewriteFallbackUrl")(a.listItemProfilePictureUrlFallback3):a.listItemProfilePictureUrl3}catch(b){return a.listItemProfilePictureUrl3}}i={faviconUrl:i,headerImageUrl:m,imageUrl:f,listItemContactUrlList1:j,listItemContactUrlList2:k,listItemContactUrlList3:l,listItemProfilePictureUrl1:n,listItemProfilePictureUrl2:o,listItemProfilePictureUrl3:p,playableUrl:e,previewUrl:a,previewUrlLarge:b};function q(a){var b=a.previewUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.previewUrlFallback);else return a.previewUrl}function r(a){var b=a.previewUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.previewUrlFallback);else return a.previewUrlLarge}function s(a){var b=a.playableUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.playableUrlFallback);else return a.playableUrl}function t(a){var b=a.faviconUrlExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return c("rewriteFallbackUrl")(a.faviconUrlFallback);else return a.faviconUrl}m={faviconUrl:t,playableUrl:s,previewUrl:q,previewUrlLarge:r};g.Attachment=i;g.AttachmentItem=m}),98);/*FB_PKG_DELIM*/
__d("MWXIconGlobeAmericas",["MWXSvgIcon","SVGIcon","cr:7739","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7739")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWXIconLock",["MWXSvgIcon","SVGIcon","cr:7805","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:7805")),c("gkx")("571")||c("gkx")("386"));g["default"]=a}),98);
__d("MWXThreadThemeColor",[],(function(a,b,c,d,e,f){"use strict";var g=function(a){this.color=a};function a(a){return new g(a)}f.MWXThreadThemeColor=g;f.mwxThreadThemeColor=a}),66);
__d("MWXCircleButton.react",["BaseTheme.react","MWXSvgIcon","MWXThreadThemeColor","cr:6680","cr:6681","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a,e){var f=a.color,g=a.icon,h=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","size"]);var k=f instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?"primary":f,l=j(function(){return f instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":f.color},light:{"primary-icon":f.color},type:"VARIABLES"}:void 0},[f]),m=g instanceof d("MWXSvgIcon").MWXSvgIcon?g.component:g,n=null;b("cr:6680")!=null&&(n=i.jsx(b("cr:6680"),babelHelpers["extends"]({color:k,icon:m,size:h},a,{ref:e})));b("cr:6681")!=null&&(n=i.jsx(b("cr:6681"),babelHelpers["extends"]({color:k,icon:m,size:h},g instanceof d("MWXSvgIcon").MWXSvgIcon?{iconRatio:"medium"}:{},a,{ref:e})));l!=null&&(n=i.jsx(c("BaseTheme.react"),{config:l,children:n}));return n}a.displayName=a.name+" [from "+f.id+"]";e=i.forwardRef(a);g["default"]=e}),98);
__d("MAWMiActCreateThreadInActWithMiData",["I64","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWJids","MAWJobDefinitions","MAWTTRC","MAWTrackPendingOccamadilloThreads","MAWUIJob","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Occamadillo] Querying WA server for group: ",""]);i=function(){return a};return a}function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){try{b=(h||(h=d("I64"))).to_string(b);var j=g?d("MAWJids").toGroupJid(b):d("MAWJids").toUserJid(b);d("MAWTrackPendingOccamadilloThreads").addPendingThread(b);a=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","createThreadThroughMI",{authoritativeThreadKey:h.to_string(a),chatJid:j,lastActivityTimestampMs:h.to_float(e),lastReadWatermarkTimestampMs:h.to_float(f)}));g&&(a.isCreated&&(c("promiseDone")(d("WALoggerDeferred").DEV(i(),b)),yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("queryGroups",{group:d("MAWJids").toGroupJid(b),scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH},type:"single"})),d("MAWBridgeFireAndForget").fireAndForget("backend","checkIfGroupParticipant",{threadId:a.chatId,threadJid:a.chatJid})));c("promiseDone")(d("MAWTrackPendingOccamadilloThreads").removePendingThread(b));return a}catch(a){d("MAWTTRC").fail("thread_mapping_error",c("getErrorSafe")(a));throw a}});return j.apply(this,arguments)}g.miActCreateThreadInActWithMiData=a}),98);
__d("MAWMiActLoadExistingThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Running verify thread exists sproc for state "," threadKey: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MiActMapping] Retry ACT thread creation for threadKey: ",""]);k=function(){return a};return a}function l(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2")((h||(h=d("LSIntEnum"))).ofNumber(15),b,h.ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),c("LSFactory")(a)).then(function(){})},"readwrite")}function m(a){return d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData(a.serverThreadKey,a.jidInt64,a.thread.lastActivityTimestampMs,a.thread.lastReadWatermarkTimestampMs,d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType)).then(function(){})}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a,b,"loadExistingThread"));switch(e.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(b)));return m(e);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_JID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY_BY_CHAT_ID:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:c("promiseDone")(d("WALoggerDeferred").LOG(j(),e.type,(i||(i=d("I64"))).to_string(b)));return l(a,b);default:e.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",e.type)}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("CometScrollView.react",["BaseScrollableArea.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h.forwardRef;var j={root:{position:"x1n2onr6",willChange:"xq1qtft",$$css:!0}};function a(a,b){var d=a.children,e=a["data-testid"];e=a.hideScrollbar;e=e===void 0?!1:e;var f=a.onScroll,g=a.onScrollBottom,h=a.onScrollTop,k=a.showsHorizontalScrollIndicator;k=k===void 0?!0:k;var l=a.showsVerticalScrollIndicator;l=l===void 0?!0:l;a=a.xstyle;a=a===void 0?null:a;return i.jsx(c("BaseScrollableArea.react"),{expanding:!0,hideScrollbar:e,horizontal:k,onScroll:f,onScrollBottom:g,onScrollTop:h,ref:b,testid:void 0,vertical:l,xstyle:[j.root,a],children:d})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("MessagingCommunityType",[],(function(a,b,c,d,e,f){a=Object.freeze({FB_COMMUNITY:0,STANDALONE_COMMUNITY:1});f["default"]=a}),66);
__d("MWCMisStandAloneCommunity",["I64","LSIntEnum","MessagingCommunityType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").STANDALONE_COMMUNITY))}g["default"]=a}),98);
__d("MWXIconStrict.react",["BaseTheme.react","CometSVGIcon.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.alt,e=a.color,f=e===void 0?"primary":e;e=a.icon;a=a.size;var g=f instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?"primary":f,h=j(function(){return f instanceof d("MWXThreadThemeColor").MWXThreadThemeColor?{dark:{"primary-icon":f.color},light:{"primary-icon":f.color},type:"VARIABLES"}:{dark:{"placeholder-icon":"var(--nux-icon-color)"},light:{"placeholder-icon":"var(--nux-icon-color)"},type:"VARIABLES"}},[f]);b=i.jsx(c("CometSVGIcon.react"),{alt:b,color:g,component:e.component.component,size:a});return h==null?b:i.jsx(c("BaseTheme.react"),{config:h,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XCometGroupLandingControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groupslanding/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("getLSMediaCommunityFolderCoverPictureUrl",["LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return;var b=a.coverPicUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.coverPicUrlFallback):a.coverPicUrl}g["default"]=a}),98);
__d("getLSMediaCommunityFolderPictureUrl",["LSMediaUrlUtils","rewriteFallbackUrl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return;var b=a.pictureUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?c("rewriteFallbackUrl")(a.pictureUrlFallback):a.pictureUrl}g["default"]=a}),98);
__d("MWInboxDetailCommunityNullState.react",["fbt","CometColumn.react","CometColumnItem.react","CometNullState.react","CometRow.react","CometRowItem.react","CometScrollView.react","CometTextWithEntities.react","I64","LSCommunityBitOffset","MWCMisStandAloneCommunity","MWInboxDetailNullState.react","MWPBumpEntityKey","MWXIconGlobeAmericas","MWXIconLock","MWXIconStrict.react","MWXLink.react","MWXText.react","ReQL","ReQLSuspense","XCometGroupLandingControllerRouteBuilder","getLSMediaCommunityFolderCoverPictureUrl","getLSMediaCommunityFolderPictureUrl","gkx","intlSummarizeNumber","react","stylex","useMatchMedia","useMigrateURLParamsToRouteParams","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=k||d("react"),n={innerContainer:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xqtp20y",maxWidth:"x65f84u",$$css:!0},outerContainer:{alignItems:"x1qjc9v5",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},scrollContainer:{backgroundColor:"x2bj2ny",display:"x78zum5",height:"x5yr21d",width:"xh8yej3",$$css:!0},scrollContainerMMR:{borderTopStartRadius:"xar2s8o",borderTopEndRadius:"x170tg8w",borderBottomEndRadius:"xhh9t72",borderBottomStartRadius:"x110lsmw",boxShadow:"x1tsi7gu",marginBottom:"x1iymm2a",$$css:!0}};function o(a,b){var d,e=[460,300,120],f=[72,72,180];d=(d=c("getLSMediaCommunityFolderCoverPictureUrl")(a))!=null?d:!1;a=(a=c("getLSMediaCommunityFolderPictureUrl")(a))!=null?a:!1;if(d)return[d,b?f:e];return a?[a,f]:[null,[]]}function p(a){if(a.fbGroupType!=null){a=(l||(l=d("I64"))).to_int32(a.fbGroupType);switch(a){case 1:return[c("MWXIconGlobeAmericas"),h._("__JHASH__kw_7ER2LgGP__JHASH__"),h._("__JHASH__dwVOag0K5ll__JHASH__")];case 2:case 3:return[c("MWXIconLock"),h._("__JHASH__OFN0-q_WIRf__JHASH__"),h._("__JHASH__mGSAZ1zsKik__JHASH__")];default:return[null,null,null]}}return[null,null,null]}function q(a){a=a.folder;var b=c("useMatchMedia")("(max-width: 1100px)");a=o(a,b);b=a[0];a=a[1];var d=a[0],e=a[1];a=a[2];return b===null?null:m.jsx("div",{style:{backgroundImage:"url("+b+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",borderRadius:"20px",height:e+"px",marginTop:a+"px",width:d+"px"}})}q.displayName=q.name+" [from "+f.id+"]";function r(a){a=a.folder;var b=c("useMigrateURLParamsToRouteParams")(),e=(l||(l=d("I64"))).to_int32(a.memberCount),f=c("intlSummarizeNumber")(e),g=c("MWCMisStandAloneCommunity")(a==null?void 0:a.communityType),j=p(a),k=j[0],o=j[1];j=j[2];e=h._("__JHASH__HnCedBHVI70__JHASH__",[h._plural(e),h._param("memberCount",f)]);f=(f=c("XCometGroupLandingControllerRouteBuilder").buildUri({group_id:(l||(l=d("I64"))).to_string(a.fbGroupId)}))==null?void 0:(f=f.setDomain("www.facebook.com"))==null?void 0:(f=f.setProtocol("https"))==null?void 0:f.toString();var r=h._("__JHASH__mXgmxaa1LaD__JHASH__");b=(b==null?void 0:b.view)==="welcome"?h._("__JHASH__MrHj_9znl1___JHASH__",[h._param("communityName",a.name)]).toString():a.name;var s={color:"primary",weight:"medium"},t=c("gkx")("571")&&c("gkx")("386");return m.jsx("div",{className:(i||(i=c("stylex")))(n.scrollContainer,t?n.scrollContainerMMR:null),children:m.jsx(c("CometScrollView.react"),{children:m.jsx("div",{className:"x1qjc9v5 x78zum5 xl56j7k",children:m.jsx("div",{className:"x78zum5 xdt5ytf xqtp20y x65f84u",children:m.jsxs(c("CometColumn.react"),{children:[m.jsx(c("CometColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:12,children:m.jsx(q,{folder:a})}),m.jsx(c("CometColumnItem.react"),{align:"center",paddingTop:20,children:m.jsx(c("MWXText.react"),{color:"primary",type:"headlineEmphasized2",children:b})}),m.jsx(c("CometColumnItem.react"),{align:"center",paddingVertical:16,children:m.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:e})}),((t=a.description)==null?void 0:t.length)?m.jsx(c("CometColumnItem.react"),{align:"center",paddingHorizontal:20,paddingVertical:16,children:m.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:m.jsx(c("CometTextWithEntities.react"),{maxLength:240,maxLines:3,seeLessLinkProps:s,seeMoreLinkProps:s,text:a.description,truncationStyle:"see-more-and-less",withParagraphs:!0})})}):null,o!=null&&k!=null&&k!=null?m.jsx(c("CometColumnItem.react"),{paddingVertical:20,children:m.jsxs(c("CometRow.react"),{children:[m.jsx(c("CometRowItem.react"),{verticalAlign:"center",children:m.jsx(c("MWXIconStrict.react"),{color:"disabled",icon:k,size:20})}),m.jsx(c("CometRowItem.react"),{expanding:!0,children:m.jsxs(c("CometColumn.react"),{children:[m.jsx(c("CometColumnItem.react"),{children:m.jsx(c("MWXText.react"),{align:"start",color:"primary",type:"headline3",children:o})}),m.jsx(c("CometColumnItem.react"),{paddingTop:12,children:m.jsx(c("MWXText.react"),{align:"start",color:"secondary",type:"body3",children:j})})]})})]})}):null,g?null:m.jsx(c("CometColumnItem.react"),{align:"center",paddingVertical:20,children:m.jsx(c("MWXLink.react"),{href:f,onClick:function(a){return d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.nux","group_go_to")},target:"_blank",children:m.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink3",children:r})})})]})})})})})}r.displayName=r.name+" [from "+f.id+"]";function s(){var a=h._("__JHASH__dIo0pOtehyL__JHASH__");return m.jsx(c("CometNullState.react"),{headline:a})}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b=a.folderId,e=(j||(j=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("community_folders")).getKeyRange((l||(l=d("I64"))).of_string(b))},[e,b],f.id+":333");if(!a)return m.jsx(s,{});var g=c("gkx")("571")&&c("gkx")("386"),h=d("LSCommunityBitOffset").has(57,a)||d("LSCommunityBitOffset").has(45,a);return h||g?m.jsx(r,{folder:a}):m.jsx(c("MWInboxDetailNullState.react"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxNullStateWithIllustration.react",["fbt","ix","CometColumn.react","CometColumnItem.react","CometImageFromIXValue.react","MWXText.react","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(){var a=c("useCurrentDisplayMode")();a=a==="dark"?i("285542"):i("285544");return k.jsx("div",{className:"x6s0dn4 x2bj2ny x78zum5 x5yr21d xl56j7k xh8yej3",children:k.jsx("div",{className:"x78zum5",children:k.jsxs(c("CometColumn.react"),{children:[k.jsx(c("CometColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:12,children:k.jsx(c("CometImageFromIXValue.react"),{source:a})}),k.jsx(c("CometColumnItem.react"),{align:"center",paddingTop:20,children:k.jsx(c("MWXText.react"),{color:"primary",type:"headlineEmphasized2",children:h._("__JHASH__ILJ5WfVYxF___JHASH__")})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxDetailInboxNullState.react",["MWInboxNullStateWithIllustration.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){return i.jsx(c("MWInboxNullStateWithIllustration.react"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxDetailNullState.react",["CometContentArea.react","MWInboxDetailCommunityNullState.react","MWInboxDetailInboxNullState.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entityId;a=a.entityType;return i.jsx(c("CometContentArea.react"),{hasNoRole:!0,verticalAlign:"middle",children:a==="community_folder"&&b!=null?i.jsx(c("MWInboxDetailCommunityNullState.react"),{folderId:b}):i.jsx(c("MWInboxDetailInboxNullState.react"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDSecureThreadContainer.react",["IGDThread.react","MAWMiActLoadExistingThread","MWInboxDetailNullState.react","MWLSThread","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useEffect;function l(a){var b=(h||(h=c("useReStore")))();k(function(){c("promiseDone")(c("MAWMiActLoadExistingThread")(b,a))},[b,JSON.stringify(a)])}function a(a){a=a.threadKey;var b=d("MWLSThread").useThread(a);l(a);return b?j.jsx(c("IGDThread.react"),{thread:b}):j.jsx(c("MWInboxDetailNullState.react"),{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDThreadContainer.react",["IGDOpenThreadContainer.react","IGDRouteProvider.react","IGDSecureThreadContainer.react","LSMessagingThreadTypeUtil","react","useMaybeAddE2EEAnnotations"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),b=d("IGDRouteProvider.react").useThreadTypeFromCurrentRoute();c("useMaybeAddE2EEAnnotations")();if(a==null)return null;b=b!=null?d("LSMessagingThreadTypeUtil").isSecure(b):!1;return b?i.jsx(c("IGDSecureThreadContainer.react"),{threadKey:a},a):i.jsx(c("IGDOpenThreadContainer.react"),{threadKey:a},a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("useIsThreadBlocked",["I64","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","MWThreadKey.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=(j||(j=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(b)},[a,b],f.id+":30"),k=d("ReQLSuspense").useFirst(function(){return(g==null?void 0:g.threadKey)!=null&&(g==null?void 0:g.threadType)!=null&&d("LSMessagingThreadTypeUtil").isOneToOne(g==null?void 0:g.threadType)?d("ReQL").leftJoin(d("ReQL").fromTableAscending(a.table("participants")).getKeyRange(b).filter(function(a){return!(h||(h=d("I64"))).equal(a.contactId,e)}).take(1),d("ReQL").fromTableAscending(a.table("contacts"))).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[a,b],f.id+":35");if(k!=null)return!(h||(h=d("I64"))).equal(k.blockedByViewerStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));else return!1}g["default"]=a}),98);
__d("LSFeatureLimitsType",[],(function(a,b,c,d,e,f){a=Object.freeze({READ_ONLY:1,GENERIC_READ_ONLY_BLOCK:2,MESSAGE_SEND:4,MESSENGER_ONLY_ACCOUNTS_READ_ONLY_BLOCK:8,MESSAGE_SEND_PRIVATE:16,MESSAGE_SEND_PUBLIC:32});f["default"]=a}),66);
__d("MWPFeatureLimitedData",["I64","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","ServerTime","gkx","useReStore","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)];function l(a){for(var b=0;b<k.length;b++){var c=k[b];if((j||(j=d("I64"))).equal(c,a.type_))return!0}return!1}function m(a,b){return(j||(j=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC),a.type_)&&d("LSMessagingThreadTypeUtil").isPublicCMThread(b)&&c("gkx")("9277")}function n(a,b){return(j||(j=d("I64"))).equal((i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE),a.type_)&&d("LSMessagingThreadTypeUtil").isPrivateThread(b)&&c("gkx")("9278")}var o=function(a){var b=(j||(j=d("I64"))).of_float(d("ServerTime").getMillis()/1e3);return d("ReQL").fromTableAscending(a.table("feature_limits")).filter(function(a){return l(a)&&(j||(j=d("I64"))).gt(a.expirationTimestampSeconds,b)})},p=function(a,b){var e=(j||(j=d("I64"))).of_float(c("useServerTime")().valueOf()/1e3);return d("ReQL").fromTableAscending(a.table("feature_limits")).filter(function(a){return(b!=null?l(a)||m(a,b)||n(a,b):l(a))&&(j||(j=d("I64"))).gt(a.expirationTimestampSeconds,e)})};function a(){var a=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return o(a)},[a],f.id+":116")}function b(a){var b=(h||(h=c("useReStore")))(),e=p(b,a);return d("ReQLSuspense").useFirst(function(){return e},[e],f.id+":125")}g.readonlyFeatureLimitQuery=o;g.useReadOnlyFeatureLimitData=a;g.useReadOnlyFeatureLimitDataWithThreadType=b}),98);
__d("useIsReadOnlyFeatureLimited",["MWPFeatureLimitedData","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitData();if(a!=null)return c("gkx")("1908348");else return!1}g["default"]=a}),98);
__d("EmojiRendererData",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}a.isEmoji=function(a){return a>983041||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8601||a>=8617&&a<=8618||a>=8986&&a<=8987||a===9e3||a===9167||a>=9193&&a<=9203||a>=9208&&a<=9210||a===9410||a>=9642&&a<=9643||a===9654||a===9664||a>=9723&&a<=9726||a>=9728&&a<=9732||a===9742||a===9745||a>=9748&&a<=9749||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9786||a===9792||a===9794||a>=9800&&a<=9811||a>=9823&&a<=9824||a===9827||a>=9829&&a<=9830||a===9832||a===9851||a>=9854&&a<=9855||a>=9874&&a<=9879||a===9881||a>=9883&&a<=9884||a>=9888&&a<=9889||a===9895||a>=9898&&a<=9899||a>=9904&&a<=9905||a>=9917&&a<=9918||a>=9924&&a<=9925||a===9928||a>=9934&&a<=9935||a===9937||a>=9939&&a<=9940||a>=9961&&a<=9962||a>=9968&&a<=9973||a>=9975&&a<=9976||a===9978||a===9981||a===9986||a===9989||a>=9992&&a<=9993||a===9999||a===10002||a===10004||a===10006||a===10013||a===10017||a===10024||a>=10035&&a<=10036||a===10052||a===10055||a===10060||a===10062||a>=10067&&a<=10069||a===10071||a>=10083&&a<=10084||a>=10133&&a<=10135||a===10145||a===10160||a===10175||a>=10548&&a<=10549||a>=11013&&a<=11015||a>=11035&&a<=11036||a===11088||a===11093||a===12336||a===12349||a===12951||a===12953||a===126980||a===127183||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127374||a>=127377&&a<=127386||a>=127462&&a<=127487||a>=127489&&a<=127490||a===127514||a===127535||a>=127538&&a<=127546||a>=127568&&a<=127569||a>=127744&&a<=127777||a>=127780&&a<=127876||a>=127878&&a<=127891||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127937||a>=127941&&a<=127942||a>=127944&&a<=127945||a>=127949&&a<=127984||a>=127987&&a<=127989||a>=127991&&a<=127994||a>=128e3&&a<=128065||a>=128068&&a<=128069||a>=128081&&a<=128101||a>=128121&&a<=128123||a>=128125&&a<=128128||a===128132||a>=128136&&a<=128142||a===128144||a>=128146&&a<=128169||a>=128171&&a<=128253||a>=128255&&a<=128317||a>=128329&&a<=128334||a>=128336&&a<=128359||a>=128367&&a<=128368||a===128371||a>=128374&&a<=128377||a===128391||a>=128394&&a<=128397||a>=128420&&a<=128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a>=128506&&a<=128580||a>=128584&&a<=128586||a>=128640&&a<=128674||a>=128676&&a<=128691||a>=128695&&a<=128703||a>=128705&&a<=128709||a===128715||a>=128717&&a<=128722||a>=128725&&a<=128727||a>=128732&&a<=128741||a===128745||a>=128747&&a<=128748||a===128752||a>=128755&&a<=128764||a>=128992&&a<=129003||a===129008||a>=129293&&a<=129294||a>=129296&&a<=129303||a>=129312&&a<=129317||a>=129319&&a<=129327||a===129338||a>=129343&&a<=129349||a>=129351&&a<=129398||a>=129400&&a<=129460||a===129463||a===129466||a>=129468&&a<=129484||a===129488||a>=129502&&a<=129535||a>=129648&&a<=129660||a>=129664&&a<=129672||a>=129680&&a<=129725||a>=129727&&a<=129730||a>=129742&&a<=129755||a>=129760&&a<=129768||a>=917536&&a<=917631||a>=983040&&a<=983041};a.isEmojiModifier=function(a){return a>127999||a<127995?!1:a>=127995&&a<=127999};a.isEmojiModifierBase=function(a){return a>129784||a<9757?!1:a===9757||a===9977||a>=9994&&a<=9997||a===127877||a>=127938&&a<=127940||a===127943||a>=127946&&a<=127948||a>=128066&&a<=128067||a>=128070&&a<=128080||a>=128102&&a<=128120||a===128124||a>=128129&&a<=128131||a>=128133&&a<=128135||a===128143||a===128145||a===128170||a>=128372&&a<=128373||a===128378||a===128400||a>=128405&&a<=128406||a>=128581&&a<=128583||a>=128587&&a<=128591||a===128675||a>=128692&&a<=128694||a===128704||a===128716||a===129292||a===129295||a>=129304&&a<=129311||a===129318||a>=129328&&a<=129337||a>=129340&&a<=129342||a===129399||a>=129461&&a<=129462||a>=129464&&a<=129465||a===129467||a>=129485&&a<=129487||a>=129489&&a<=129501||a>=129731&&a<=129733||a>=129776&&a<=129784};a.isEmojiVariationSelector=function(a){return a===65039};a.isNonSpacingCombiningMark=function(a){return a>8419||a<8416?!1:a===8416||a===8419};a.isRegionalIndicator=function(a){return a>127487||a<127462?!1:a>=127462&&a<=127487};a.isTagSpec=function(a){return a>917630||a<917536?!1:a>=917536&&a<=917568||a>=917595&&a<=917630};a.isTagTerm=function(a){return a===917631};a.isText=function(a){return a>8419||a<35?!1:a===35||a===42||a>=48&&a<=57||a===8419};a.isTextVariationSelector=function(a){return a===65038};a.isDefaultTextPresentation=function(a){return a>917631||a<35?!1:a===35||a===42||a>=48&&a<=57||a===169||a===174||a===8205||a===8252||a===8265||a===8419||a===8482||a===8505||a>=8596&&a<=8597||a>=8617&&a<=8618||a===9e3||a===9167||a>=9197&&a<=9199||a>=9201&&a<=9202||a>=9208&&a<=9210||a===9410||a===9654||a===9664||a>=9730&&a<=9732||a===9745||a===9752||a===9760||a>=9762&&a<=9763||a===9766||a===9770||a>=9774&&a<=9775||a>=9784&&a<=9785||a===9792||a===9794||a===9823||a===9851||a===9854||a===9874||a>=9876&&a<=9879||a===9881||a>=9883&&a<=9884||a===9895||a>=9904&&a<=9905||a===9928||a===9935||a===9937||a===9939||a===9961||a>=9968&&a<=9969||a===9972||a>=9975&&a<=9977||a===9997||a===9999||a===10002||a===10004||a===10013||a===10017||a===10052||a===10055||a===10083||a===12336||a>=127344&&a<=127345||a>=127358&&a<=127359||a===127777||a>=127780&&a<=127788||a===127798||a===127869||a>=127894&&a<=127895||a>=127897&&a<=127899||a>=127902&&a<=127903||a>=127947&&a<=127950||a>=127956&&a<=127967||a===127987||a===127989||a===127991||a===128063||a===128065||a===128253||a>=128329&&a<=128330||a>=128367&&a<=128368||a>=128371&&a<=128377||a===128391||a>=128394&&a<=128397||a===128400||a===128421||a===128424||a>=128433&&a<=128434||a===128444||a>=128450&&a<=128452||a>=128465&&a<=128467||a>=128476&&a<=128478||a===128481||a===128483||a===128488||a===128495||a===128499||a===128506||a===128715||a>=128717&&a<=128719||a>=128736&&a<=128741||a===128745||a===128752||a===128755||a>=917536&&a<=917631};a.isSymbol=function(a){return a>8482||a<169?!1:a===169||a===174||a===8482};a.isZWJ=function(a){return a===8205};return a}();e.exports=a}),null);
__d("UnicodeUtils",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i=55296,j=56319,k=56320,l=57343,m=/[\uD800-\uDFFF]/;function n(a){return i<=a&&a<=l}function a(a,b){0<=b&&b<a.length||h(0,1346,b,a.length);if(b+1===a.length)return!1;var c=a.charCodeAt(b);a=a.charCodeAt(b+1);return i<=c&&c<=j&&k<=a&&a<=l}function o(a){return m.test(a)}function p(a,b){return 1+n(a.charCodeAt(b))}function b(a){if(!o(a))return a.length;var b=0;for(var c=0;c<a.length;c+=p(a,c))b++;return b}function c(a,b){return r(a,b,b+1)}function q(a,b,c){var d=b||0;c=c===void 0?Infinity:c||0;if(!o(a))return a.substr(d,c);var e=a.length;if(e<=0||d>e||c<=0)return"";var f=0;if(d>0){for(;d>0&&f<e;d--)f+=p(a,f);if(f>=e)return""}else if(b<0){for(f=e;d<0&&0<f;d++)f-=p(a,f-1);f<0&&(f=0)}b=e;if(c<e)for(b=f;c>0&&b<e;c--)b+=p(a,b);return a.substring(f,b)}function r(a,b,c){b=b||0;c=c===void 0?Infinity:c||0;b<0&&(b=0);c<0&&(c=0);var d=Math.abs(c-b);b=b<c?b:c;return q(a,b,d)}function d(a){var b=[];for(var c=0;c<a.length;c+=p(a,c))b.push(a.codePointAt(c));return b}g.isCodeUnitInSurrogateRange=n;g.isSurrogatePair=a;g.hasSurrogateUnit=o;g.getUTF16Length=p;g.strlen=b;g.charAt=c;g.substr=q;g.substring=r;g.getCodePoints=d}),98);
__d("EmojiRenderer",["EmojiRendererData","UnicodeUtils"],(function(a,b,c,d,e,f,g){var h,i,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11;function v(a){var b=a[0];if(b===void 0)return!1;var d=a.length,e=a[d-1];if(e){e=e.charCodeAt(0);if((i||(i=c("EmojiRendererData"))).isTagSpec(e))return!1}b=b.charCodeAt(0);if((i||(i=c("EmojiRendererData"))).isSymbol(b)&&d<2)return!1;if((i||(i=c("EmojiRendererData"))).isText(b))if(d===1)return!1;else if(a.length==2)return(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(a[1].charCodeAt(0));else{e=1;(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(a[e].charCodeAt(0))&&e++;while(e<a.length){if(!(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(a[e].charCodeAt(0)))return!1;e++}return!0}return!0}function w(a,b){var e=null,f=[],g=r,w=0,x=a.length;while(w<x){var y=a.codePointAt(w),z=(h||(h=d("UnicodeUtils"))).getUTF16Length(a,w),A=a.substr(w,z);switch(g){case s:(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=m:g=r;break;case n:if((i||(i=c("EmojiRendererData"))).isEmojiModifier(y)){g=o;break}case j:(i||(i=c("EmojiRendererData"))).isZWJ(y)?g=q:(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(y)?g=l:(i||(i=c("EmojiRendererData"))).isTextVariationSelector(y)?g=u:(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y)?g=k:(i||(i=c("EmojiRendererData"))).isTagSpec(y)?g=p:g=r;break;case k:case l:if((i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y))break;case m:case o:(i||(i=c("EmojiRendererData"))).isZWJ(y)?g=q:(i||(i=c("EmojiRendererData"))).isTagSpec(y)?g=p:g=r;break;case p:(i||(i=c("EmojiRendererData"))).isTagSpec(y)||(i||(i=c("EmojiRendererData"))).isTagTerm(y)?g=p:g=r;break;case q:(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=s:(i||(i=c("EmojiRendererData"))).isEmojiModifierBase(y)?g=n:(i||(i=c("EmojiRendererData"))).isEmoji(y)?g=j:g=r;break;case t:(i||(i=c("EmojiRendererData"))).isNonSpacingCombiningMark(y)?g=k:(i||(i=c("EmojiRendererData"))).isEmojiVariationSelector(y)?g=l:g=r;break;default:g=r;break}if(g===r){(i||(i=c("EmojiRendererData"))).isRegionalIndicator(y)?g=s:(i||(i=c("EmojiRendererData"))).isEmojiModifierBase(y)?g=n:(i||(i=c("EmojiRendererData"))).isText(y)?g=t:(i||(i=c("EmojiRendererData"))).isEmoji(y)&&(g=j);if(g!==r){e!==null&&v(e.emoji)&&f.push(e);if(b!==null&&b===f.length){e=null;break}e={emoji:[A],length:z,offset:w}}}else e!==null&&(e.emoji.push(A),e.length+=z);w+=z}e!==null&&v(e.emoji)&&f.push(e);return f}function a(a,b,c){c=w(a);var d=[],e=0;c.forEach(function(c){var f=c.offset;f>e&&d.push(a.substr(e,f-e));var g=b(c.emoji);g!=null&&d.push(g);e=f+c.length});d.push(a.substr(e,a.length-e));return d}function b(a){return w(a,1).length===1}function e(a){return w(a).length}g.parse=w;g.render=a;g.containsEmoji=b;g.countEmoji=e}),98);
__d("ThreadStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,PAUSED:1});f["default"]=a}),66);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("remove-accents-0.4.2",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){var a={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},b=Object.keys(a).join("|"),c=new RegExp(b,"g"),d=new RegExp(b,"");b=function(b){return b.replace(c,function(b){return a[b]})};var e=function(a){return!!a.match(d)};g.exports=b;g.exports.has=e;g.exports.remove=b}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("remove-accents",["remove-accents-0.4.2"],(function(a,b,c,d,e,f){e.exports=b("remove-accents-0.4.2")()}),null);/*FB_PKG_DELIM*/
__d("IGDThemeConfig",[],(function(a,b,c,d,e,f){"use strict";a={dark:{"card-background":"rgb(var(--ig-primary-background))","comment-background":"rgb(var(--ig-highlight-background))","filter-primary-icon":"invert(100%)","messenger-card-background":"rgb(var(--ig-primary-background))","mwp-message-list-actions-width":"96px","primary-text":"rgb(var(--ig-primary-text))"},light:{"card-background":"rgb(var(--ig-primary-background))","comment-background":"rgb(var(--ig-highlight-background))","messenger-card-background":"rgb(var(--ig-primary-background))","mwp-message-list-actions-width":"96px","primary-text":"rgb(var(--ig-primary-text))"},type:"VARIABLES"};b=a;f["default"]=b}),66);
__d("isGroupInvitesEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("125")===!0}g["default"]=a}),98);
__d("getBreadcrumbTitleFromRouteState",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){d===void 0&&(d=!1);if(!b)return a;var e=b.hosted,f=b.main;b=b.pushViewStack;c=(c=c)!=null?c:" | ";var g=[];if(b!=null&&b.length>0){b=b[b.length-1];b=(b=b.route.meta)==null?void 0:b.title;b!=null&&g.push(b)}else{if(e!=null){e=(b=e.route.meta)==null?void 0:b.title;e!=null&&g.push(e)}e=(b=f.route.meta)==null?void 0:b.title;e!=null&&g.push(e);e=(b=f.route.meta)==null?void 0:b.accessory;e!=null&&g.push(e)}(!d||g.length===0)&&g.push(a);f=new Set(g);return f.size!==g.length?a:g.join(c)}f["default"]=a}),66);
__d("useCometMetaManagerRouteFavicon",["ExecutionEnvironment","react","recoverableViolation","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.useRef;function a(a){var b,d=c("useCometRouterState")(),e=(b=d==null?void 0:(b=d.hosted)==null?void 0:(b=b.route.meta)==null?void 0:b.favicon)!=null?b:d==null?void 0:(b=d.main.route.meta)==null?void 0:b.favicon,f=k(null);j(function(){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM)return;f.current==null&&(f.current=document.querySelector('link[rel*=icon][href*=".ico"]'));var b=f.current;if(b!=null&&b instanceof HTMLLinkElement){var d=b.dataset,g=d.badgedIcon;d=d.defaultIcon;a&&(g==null||d==null)&&c("recoverableViolation")("Unable to update favicon. icon href was not found on the favicon element, please set data-default-icon and data-badged-icon attributes.","comet_ui");d=e?e["default"]:d;g=e?e.badged:g;g=a&&g!=null?g:d;b.href!==g&&g!=null&&(b.href=g)}},[e,a])}g["default"]=a}),98);
__d("useDocumentTitleBlinkEffect",["ExecutionEnvironment","clearInterval","react","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=1500;function a(a){var b=a.blinkingTitle,d=a.routeTitle;j(function(){if(!(h||(h=c("ExecutionEnvironment"))).canUseDOM)return;if(b==null||b===""){document.title!==d&&(document.title=d);return}var a=c("setInterval")(function(){document.title===d?document.title=b:document.title=d},k);return function(){c("clearInterval")(a),document.title=d}},[b,d])}g["default"]=a}),98);
__d("CometRouterMetaManager",["getBreadcrumbTitleFromRouteState","useCometMetaManagerRouteFavicon","useCometRouterState","useDocumentTitleBlinkEffect"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.appTitle,d=a.badgeConfig,e=a.blinkingTitle,f=a.customBreadcrumbTitleSeparator;f=f===void 0?null:f;var g=a.onlyShowAppTitleIfNoTitle;g=g===void 0?!1:g;a=a.shouldBadgeFavicon;a=a===void 0?!1:a;var i=c("useCometRouterState")();b=c("getBreadcrumbTitleFromRouteState")(b,i,f,g);i=d?h({badgeConfig:d,title:b}):b;c("useDocumentTitleBlinkEffect")({blinkingTitle:e,routeTitle:i});c("useCometMetaManagerRouteFavicon")(a);return null}function h(a){var b=a.badgeConfig,c=b.badgeCount;b=b.badgeCountLimit;a=a.title;b=c>b?"("+b+"+) ":c>0?"("+c+") ":"";return""+b+a}g["default"]=a}),98);
__d("PolarisDirectInboxMetaManager.react",["CometErrorBoundary.react","CometRouterMetaManager","IGDUnreadBadgeCountUpdates","PolarisGetRoutePageLogging","PolarisTimeSpentNavigation","cr:3278","react","recoverableViolation","useCometRouterState","usePolarisDirectFeatures"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function k(a,b){var c=" \u2022 ";if(b==null||b==="")return a;else if(a!=="")return""+b.toString()+c+a.toString();return b}function l(a){a=a.title;var d=c("IGDUnreadBadgeCountUpdates")(),e=c("usePolarisDirectFeatures")();e=e.directTitle;e=k(e,a);a=b("cr:3278");a=a?a:function(){return void 0};a=a();return i.jsx(c("CometRouterMetaManager"),{appTitle:String(e),badgeConfig:{badgeCount:d,badgeCountLimit:9},blinkingTitle:a})}l.displayName=l.name+" [from "+f.id+"]";function m(a){c("recoverableViolation")("Error in messenger route","messenger_web_product",{error:a})}function a(a){var b=a.id;a=a.title;var e=c("useCometRouterState")(),f=e!=null?d("PolarisGetRoutePageLogging").getRoutePageLogging(e):void 0;j(function(){d("PolarisTimeSpentNavigation").setPage(b,f==null?void 0:f.params)},[b,f==null?void 0:f.params]);return i.jsx(c("CometErrorBoundary.react"),{onError:m,children:i.jsx(l,{title:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("IGDBaseButton.react",["BaseButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h.forwardRef;var j={root:{userSelect:"x87ps6o",":active_opacity":"x1d5wrs8",$$css:!0},rootDisabled:{opacity:"xuzhngd",pointerEvents:"x47corl",$$css:!0}};function a(a,b){var d=a.children,e=a.disabled;a=a.onClick;return i.jsx(c("BaseButton.react"),{disabled:e,onClick:a,ref:b,xstyle:[j.root,e===!0&&j.rootDisabled],children:d})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("IGDMessageRequestLeftRailLayout.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={desktopRoot:{minWidth:"xwqvltr",$$css:!0},messageRequestsRoot:{borderEndColor:"xopu45v",borderEndStyle:"xu3j5b3",borderEndWidth:"xm81vs4",boxSizing:"x1afcbsf",display:"x78zum5",flexDirection:"xdt5ytf",minHeight:"x1us19tq",position:"x1n2onr6",width:"xh8yej3",$$css:!0},mobileRoot:{borderEndWidth:"xcfux6l",height:"x1dr59a3",$$css:!0},page:{display:"x78zum5",height:"x5yr21d",width:"xh8yej3",$$css:!0},root:{backgroundColor:"xvbhtw8",height:"x5yr21d",outline:"x1a2a7pz",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children;a=a.isMobile;b=b;a=(a=a)!=null?a:!1;return j.jsx("div",{className:(h||(h=c("stylex")))(k.root,a?k.mobileRoot:k.desktopRoot),children:j.jsx("div",{className:"x78zum5 x5yr21d xh8yej3",children:j.jsx("div",{className:"xopu45v xu3j5b3 xm81vs4 x1afcbsf x78zum5 xdt5ytf x1us19tq x1n2onr6 xh8yej3",children:b})})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.children;a=a;return j.jsx("div",{className:"x78zum5 xdt5ytf xl56j7k x1dc814f xyinxu5 xxbr6pl x1g2khh7 xbbxn1n x2b8uid",children:a})}b.displayName=b.name+" [from "+f.id+"]";function e(a){a=a.children;a=a;return j.jsx("div",{className:"x6s0dn4 xvbhtw8 x78zum5 xl56j7k xyamay9 x4uap5 x1l90r2v xkhd6sd x2b8uid xh8yej3",children:a})}e.displayName=e.name+" [from "+f.id+"]";g.Container=a;g.InfoBox=b;g.Footer=e}),98);/*FB_PKG_DELIM*/
__d("MWPAudioPlayerIcons.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("rect",{fill:a,height:"18",rx:"2",width:"18",x:"9",y:"9"})})}b.displayName=b.name+" [from "+f.id+"]";function c(a){a=a.color;return i.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:i.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})})}c.displayName=c.name+" [from "+f.id+"]";g.PlayIcon=a;g.StopIcon=b;g.PauseIcon=c}),98);
__d("MWPAudioPlayerLabels",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH__KhMMxBdqg3x__JHASH__");b=h._("__JHASH__2rBFW-RfRDV__JHASH__");c=h._("__JHASH__IubwmxlTNhe__JHASH__");g.playLabel=a;g.stopLabel=b;g.pauseLabel=c}),98);
__d("isFeatureLimitEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("588")===!0}g["default"]=a}),98);
__d("IGDSPhotoOutlineIcon",["IGDSPhotoPanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSPhotoPanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("C4gEngagementFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1922200");b=d("FalcoLoggerInternal").create("c4g_engagement",a);e=b;g["default"]=e}),98);
__d("MWXSpinner.react",["cr:5023","cr:5028","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=a.color;a=a.size;if(b("cr:5023")!=null)return i.jsx(b("cr:5023"),{color:c,size:a});return b("cr:5028")!=null?i.jsx(b("cr:5028"),{color:c==="blue"?"blue":"grey",size:a<=12?12:a<32?24:32}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1];b.n;var d=[];return d[0]=c("gkx")("7530"),b.resolve(d)}b=a;g["default"]=b}),98);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetIfViewerIsWorkplaceUser")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),f).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=f:(b=a.item,d[2]=b.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),f).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSMarkThreadRead",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.gt(a[0],c.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);